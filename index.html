<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Welcome to CCH21&#39;s Blog"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Welcome to CCH21&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Welcome to CCH21&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">Welcome to CCH21's Blog</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/05/10/%E5%9F%BA%E4%BA%8EFluent-Terminal%E5%92%8CCmder%E6%89%93%E9%80%A0%E4%B8%80%E4%B8%AA%E7%BE%8E%E8%A7%82%E7%9A%84Windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/">
                基于Fluent Terminal和Cmder打造一个美观的Windows命令行工具
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-05-10</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&emsp;&emsp;相信有很多小伙伴跟我一样，觉得Windows的原生命令行工具具有很多缺点：传统的黑底白字（Windows PowerShell则是蓝底白字）极不美观，复制文本不方便，不支持多Tab页导致多窗口管理不便，不支持文字颜色区分等等。<br><img src="https://img-blog.csdnimg.cn/20200510204949581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;当我们看到网上其他人使用一些其他的命令行工具高效工作的时候，心里是否有一些小羡慕呢？接下来的教程，将带你手把手地打造一个属于自己的美观的命令行工具。<br>&emsp;&emsp;在教程之前先来放一张效果图吧：<br><img src="https://img-blog.csdnimg.cn/20200510210313253.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="Step-1：安装Fluent-Terminal"><a href="#Step-1：安装Fluent-Terminal" class="headerlink" title="Step 1：安装Fluent Terminal"></a>Step 1：安装Fluent Terminal</h2><p>&emsp;&emsp;这一步很简单。打开Microsoft Store搜索“Fluent Terminal”，点击安装即可。<br><img src="https://img-blog.csdnimg.cn/20200510210707895.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">&emsp;&emsp;这里我已经安装过了，所以显示的是“启动”按钮。大家只要点击“获取”然后“安装”就可以啦。<br>&emsp;&emsp;为了方便后续的使用，我建议把Fluent Terminal作为一个磁贴固定到“开始”屏幕。打开Fluent Terminal如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200510211029287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;大家在安装好之后可以点击左上方的按钮进行界面的自定义设置，比如设置字体、字号、背景透明度等等。  </p>
<h2 id="Step-2：安装Cmder"><a href="#Step-2：安装Cmder" class="headerlink" title="Step 2：安装Cmder"></a>Step 2：安装Cmder</h2><p>&emsp;&emsp;Cmder是一个功能强大的命令行工具，它相比原生的命令行工具具有很多优点（<del>可能是因为原生的命令行工具压根没有什么优点</del>）。举几个例子：Cmder支持多Tab页，方便多窗口的管理；把conemu，msysgit和clink打包在一起，让你无需配置就能使用一个真正干净的Linux终端；自带git-for-windows，可以使用常见的Unix命令等等。<br>&emsp;&emsp;首先我们打开Cmder的官网，并找到Download。<br><img src="https://img-blog.csdnimg.cn/20200510212050714.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;我们发现在Download里面有两个按钮，左边的Download Mini是不带git-for-windows的，所以文件大小会比右边的Download Full小很多。这里我下载的是右侧的。温馨提示，下载的速度会有一点点慢，需要耐心等候。<br>&emsp;&emsp;下载之后我们把Cmder的压缩包解压到任意一个目录。这里需要注意的一点是：<strong>目录必须是纯英文的，不能带有特殊字符和空格</strong>。我把它解压到了D盘，大家可以根据自己的实际情况选择解压的位置。<br><img src="https://img-blog.csdnimg.cn/20200510213618833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;之后我们就可以双击Cmder.exe运行了。  </p>
<h2 id="Step-3：配置Cmder的环境变量"><a href="#Step-3：配置Cmder的环境变量" class="headerlink" title="Step 3：配置Cmder的环境变量"></a>Step 3：配置Cmder的环境变量</h2><p>&emsp;&emsp;首先设置CMDER_ROOT。右键此电脑，点击“属性”，再点击“高级系统设置”，选择“环境变量”。点击用户变量下方的“新建”，输入变量名为<code>CMDER_ROOT</code>，变量值为Cmder压缩包刚刚解压的路径。<br><img src="https://img-blog.csdnimg.cn/2020051021523625.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;接下来，我们使用同样的方法新建用户变量<code>ConEmuDir</code>，如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200510215530974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;下一步，双击用户变量中的Path，新建<code>%CMDER_ROOT%</code>。<br><img src="https://img-blog.csdnimg.cn/20200510220019617.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;到此，我们的环境变量就全部配置完成了。  </p>
<h2 id="Step-4：添加Cmder到右键菜单"><a href="#Step-4：添加Cmder到右键菜单" class="headerlink" title="Step 4：添加Cmder到右键菜单"></a>Step 4：添加Cmder到右键菜单</h2><p>&emsp;&emsp;以管理员身份运行Windows PowerShell，输入<code>cmd</code>，定位到Cmder.exe所在文件夹，再输入命令：<code>Cmder.exe /REGISTER ALL</code>。<br>&emsp;&emsp;运行结束后，我们在任意文件夹下点击右键，如果发现有“Cmder Here”就成功了。<br><img src="https://img-blog.csdnimg.cn/20200510220927276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="Step-5：解决中文乱码问题"><a href="#Step-5：解决中文乱码问题" class="headerlink" title="Step 5：解决中文乱码问题"></a>Step 5：解决中文乱码问题</h2><p>&emsp;&emsp;打开Cmder，点击右下角按钮，选择“Settings”。<br>&emsp;&emsp;定位到Startup下的Environment标签，在框中输入以下内容：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set LANG=zh_CN.UTF-8</span><br><span class="line">set LC_ALL=zh_CN.utf8</span><br><span class="line">chcp utf-8</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;输入之后如下图所示，点击右下角的“Save Settings”按钮保存设置。<br><img src="https://img-blog.csdnimg.cn/20200510221152835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="Step-6：修改提示符符号"><a href="#Step-6：修改提示符符号" class="headerlink" title="Step 6：修改提示符符号"></a>Step 6：修改提示符符号</h2><p>&emsp;&emsp;Cmder的默认提示符为“λ”，据说可能导致某些bug。我们可以将其修改为自定义的符号，这里我将其修改为“$”。<br>&emsp;&emsp;我们需要修改两个文件。第一个文件是%CMDER_ROOT%\vendor\clink.lua文件，我们找到<code>local lambda = &quot;λ&quot;</code>这一行，将其修改为<code>local lambda = &quot;$&quot;</code>。第二个文件是%CMDER_ROOT%\vendor\git-for-windows\etc\profile.d\git-prompt.sh文件，找到<code>PS1=&quot;$PS1&quot;&#39;λ &#39;                 # prompt: always λ</code>这一行，将其修改为<code>PS1=&quot;$PS1&quot;&#39;$ &#39;</code>。  </p>
<h2 id="Step-7：将Fluent-Terminal与Cmder结合"><a href="#Step-7：将Fluent-Terminal与Cmder结合" class="headerlink" title="Step 7：将Fluent Terminal与Cmder结合"></a>Step 7：将Fluent Terminal与Cmder结合</h2><p>&emsp;&emsp;打开Fluent Terminal，点击左上角的按钮，点击“设置”，进入设置页面。<br>&emsp;&emsp;选择“配置文件”，点击“新建”，按照下图填写即可。<br><img src="https://img-blog.csdnimg.cn/20200510222232501.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;将Cmder设为默认（这个选项在上图中的右上方），然后重新打开Fluent Terminal，可以看到已经生效了。<br><img src="https://img-blog.csdnimg.cn/20200510222410841.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>&emsp;&emsp;以上就是基于Fluent Terminal和Cmder打造一个美观的Windows命令行工具的教程了。大家还可以根据自己的喜好设置一下界面的主题，使其变得更加美观。<br>&emsp;&emsp;另外需要说明的一点是，添加到右键菜单里的“Cmder Here”还是原来的Cmder界面，如果我们想使用上面配置好的界面，需要打开Fluent Terminal。  </p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/04/24/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E3%80%91%E8%BF%9115%E5%B9%B4%E7%9A%84%E4%B8%AD%E5%9B%BD%E5%9B%BD%E5%86%85%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC/">
                【Python网络爬虫与数据可视化实战案例】近15年的中国国内生产总值
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-04-24</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h2><p>&emsp;&emsp;打开东方财富网的<a href="http://data.eastmoney.com/cjsj/grossdomesticproduct.aspx?p=1" target="_blank" rel="noopener">中国国内数据总值数据页</a>，进入如下页面。<br><img src="https://img-blog.csdnimg.cn/20200424174510585.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;现在需要把页面上的国内生产总值数据表爬取下来，写入CSV文件以持久化存储。在这之后，将CSV文件内的数据做成折线图，实现数据可视化。<br>&emsp;&emsp;在爬取数据的过程中需要注意：数据表在该网页中分3页显示，我们需要在Python程序中实现换页的操作。  </p>
<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><p>&emsp;&emsp;任意选取数据表中的一行，单击鼠标右键检查元素（这里我使用的是Firefox浏览器，不同浏览器可能略有不同）进入查看器。我们得到了下图所示的HTML结构。<br><img src="https://img-blog.csdnimg.cn/2020042417484848.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;这里我们很容易发现，数据表中每一列的信息都存储在<code>table</code>标签内的<code>tr</code>标签中。那么，我们只需要定位到这个标签，对该标签内的文本进行提取，即可获得数据表中的数据。<br>&emsp;&emsp;下一个问题是如何实现换页操作。我们点击数据表下方的“下一页”，观察网址的变化。<br><img src="https://img-blog.csdnimg.cn/20200424175504551.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200424175757343.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;网址只有“p=”后的数字发生了变化，其他的地方都没有改变。不难发现，“p=”后的数字所代表的就是当前的页数。  </p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><h5 id="1-数据爬取及持久化存储"><a href="#1-数据爬取及持久化存储" class="headerlink" title="1.数据爬取及持久化存储"></a>1.数据爬取及持久化存储</h5><p>&emsp;&emsp;首先导入要用到的模块。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import csv</span><br><span class="line">import requests</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;对网站发起请求，获取页面的数据。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:75.0) Gecko/20100101 Firefox/75.0&apos;&#125;</span><br><span class="line"></span><br><span class="line">for page in range(1, 4):</span><br><span class="line">    url = &apos;http://data.eastmoney.com/cjsj/grossdomesticproduct.aspx?p=&apos; + str(page)</span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    page_text = response.text</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;使用bs4对爬取到的内容进行筛选，留下有用的数据。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(page_text, &apos;html.parser&apos;)</span><br><span class="line">table = soup.find(&apos;table&apos;, id=&apos;tb&apos;)</span><br><span class="line">tr_list = table.find_all(&apos;tr&apos;)</span><br><span class="line">tr_list.pop(-1)</span><br><span class="line">for i in range(2):</span><br><span class="line">    tr_list.pop(0)</span><br><span class="line"></span><br><span class="line">for tr in tr_list:</span><br><span class="line">    info = tr.text.replace(&apos; &apos;, &apos;&apos;).replace(&apos;\r&apos;, &apos;&apos;).replace(&apos;\n&apos;, &apos; &apos;).lstrip().rstrip()</span><br><span class="line">    info_list = info.split()</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;持久化存储，将数据写入CSV文件。<br>&emsp;&emsp;首先写入标题行。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">with open(&apos;中国国内生产总值.csv&apos;, &apos;w&apos;, newline=&apos;&apos;) as csv_out_file:</span><br><span class="line">    head_list = [&apos;季度&apos;, &apos;国内生产总值-绝对值（亿元）&apos;, &apos;国内生产总值-同比增长&apos;, &apos;第一产业-绝对值（亿元）&apos;, &apos;第一产业-同比增长&apos;,</span><br><span class="line">            &apos;第二产业-绝对值（亿元）&apos;, &apos;第二产业-同比增长&apos;, &apos;第三产业-绝对值（亿元）&apos;, &apos;第三产业-同比增长&apos;]</span><br><span class="line">    filewriter = csv.writer(csv_out_file)</span><br><span class="line">    filewriter.writerow(head_list)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;写入其余的数据行。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open...:</span><br><span class="line">    filewriter.writerow(info_list)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;重构代码后，完整代码如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import csv</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">headers = &#123;&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:75.0) Gecko/20100101 Firefox/75.0&apos;&#125;</span><br><span class="line"></span><br><span class="line">with open(&apos;中国国内生产总值.csv&apos;, &apos;w&apos;, newline=&apos;&apos;) as csv_out_file:</span><br><span class="line">    head_list = [&apos;季度&apos;, &apos;国内生产总值-绝对值（亿元）&apos;, &apos;国内生产总值-同比增长&apos;, &apos;第一产业-绝对值（亿元）&apos;, &apos;第一产业-同比增长&apos;,</span><br><span class="line">            &apos;第二产业-绝对值（亿元）&apos;, &apos;第二产业-同比增长&apos;, &apos;第三产业-绝对值（亿元）&apos;, &apos;第三产业-同比增长&apos;]</span><br><span class="line">    filewriter = csv.writer(csv_out_file)</span><br><span class="line">    filewriter.writerow(head_list)</span><br><span class="line"></span><br><span class="line">    for page in range(1, 4):</span><br><span class="line">        url = &apos;http://data.eastmoney.com/cjsj/grossdomesticproduct.aspx?p=&apos; + str(page)</span><br><span class="line">        response = requests.get(url=url, headers=headers)</span><br><span class="line">        page_text = response.text</span><br><span class="line"></span><br><span class="line">        soup = BeautifulSoup(page_text, &apos;html.parser&apos;)</span><br><span class="line">        table = soup.find(&apos;table&apos;, id=&apos;tb&apos;)</span><br><span class="line">        tr_list = table.find_all(&apos;tr&apos;)</span><br><span class="line">        tr_list.pop(-1)</span><br><span class="line">        for i in range(2):</span><br><span class="line">            tr_list.pop(0)</span><br><span class="line"></span><br><span class="line">        for tr in tr_list:</span><br><span class="line">            info = tr.text.replace(&apos; &apos;, &apos;&apos;).replace(&apos;\r&apos;, &apos;&apos;).replace(&apos;\n&apos;, &apos; &apos;).lstrip().rstrip()</span><br><span class="line">            info_list = info.split()</span><br><span class="line">            filewriter.writerow(info_list)</span><br></pre></td></tr></table></figure>
<h5 id="2-数据可视化"><a href="#2-数据可视化" class="headerlink" title="2.数据可视化"></a>2.数据可视化</h5><p>&emsp;&emsp;这一部分比较简单。首先导入需要的模块。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import csv</span><br><span class="line">from pyecharts import Line</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;读取CSV文件中的数据，并对其进行处理。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Quarter = []</span><br><span class="line">GDP = []</span><br><span class="line">Primary_industry = []</span><br><span class="line">Secondary_industry = []</span><br><span class="line">Tertiary_industry = []</span><br><span class="line"></span><br><span class="line">with open(&apos;中国国内生产总值.csv&apos;, &apos;r&apos;, newline=&apos;&apos;) as csv_in_file:</span><br><span class="line">    filereader = csv.reader(csv_in_file)</span><br><span class="line">    head = next(filereader)</span><br><span class="line">    for row_list in filereader:</span><br><span class="line">        Quarter.append(row_list[0])</span><br><span class="line">        gdp = round(eval(row_list[2][:-1]) / 100, 3)</span><br><span class="line">        GDP.append(gdp)</span><br><span class="line">        pri = round(eval(row_list[4][:-1]) / 100, 3)</span><br><span class="line">        Primary_industry.append(pri)</span><br><span class="line">        sec = round(eval(row_list[6][:-1]) / 100, 3)</span><br><span class="line">        Secondary_industry.append(sec)</span><br><span class="line">        ter = round(eval(row_list[8][:-1]) / 100, 3)</span><br><span class="line">        Tertiary_industry.append(ter)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;接下来是需要注意的一点。网站上的数据是根据时间排序的，2020年的数据在最前面，2006年的数据在最后面。即网站上的数据是根据时间“由近及远”排序的。在这里我们需要将处理好的数据列表进行逆序处理。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Quarter = Quarter[::-1]</span><br><span class="line">GDP = GDP[::-1]</span><br><span class="line">Primary_industry = Primary_industry[::-1]</span><br><span class="line">Secondary_industry = Secondary_industry[::-1]</span><br><span class="line">Tertiary_industry = Tertiary_industry[::-1]</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;最后一步是数据可视化，利用pyecharts绘制折线图。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">line = Line(&apos;中国国内生产总值同比增长率&apos;, &apos;时间：2006年第1季度-2020年第1季度  数据来源：东方财富网&apos;, width=1280, height=720)</span><br><span class="line">line.add(&apos;国内生产总值&apos;, Quarter, GDP, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;], legend_pos=&apos;right&apos;)</span><br><span class="line">line.add(&apos;第一产业&apos;, Quarter, Primary_industry, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;],</span><br><span class="line">         legend_pos=&apos;right&apos;)</span><br><span class="line">line.add(&apos;第二产业&apos;, Quarter, Secondary_industry, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;],</span><br><span class="line">         legend_pos=&apos;right&apos;)</span><br><span class="line">line.add(&apos;第三产业&apos;, Quarter, Tertiary_industry, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;],</span><br><span class="line">         legend_pos=&apos;right&apos;)</span><br><span class="line">line.render(&apos;中国国内生产总值.html&apos;)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;完整代码如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">import csv</span><br><span class="line">from pyecharts import Line</span><br><span class="line"></span><br><span class="line">Quarter = []</span><br><span class="line">GDP = []</span><br><span class="line">Primary_industry = []</span><br><span class="line">Secondary_industry = []</span><br><span class="line">Tertiary_industry = []</span><br><span class="line"></span><br><span class="line">with open(&apos;中国国内生产总值.csv&apos;, &apos;r&apos;, newline=&apos;&apos;) as csv_in_file:</span><br><span class="line">    filereader = csv.reader(csv_in_file)</span><br><span class="line">    head = next(filereader)</span><br><span class="line">    for row_list in filereader:</span><br><span class="line">        Quarter.append(row_list[0])</span><br><span class="line">        gdp = round(eval(row_list[2][:-1]) / 100, 3)</span><br><span class="line">        GDP.append(gdp)</span><br><span class="line">        pri = round(eval(row_list[4][:-1]) / 100, 3)</span><br><span class="line">        Primary_industry.append(pri)</span><br><span class="line">        sec = round(eval(row_list[6][:-1]) / 100, 3)</span><br><span class="line">        Secondary_industry.append(sec)</span><br><span class="line">        ter = round(eval(row_list[8][:-1]) / 100, 3)</span><br><span class="line">        Tertiary_industry.append(ter)</span><br><span class="line"></span><br><span class="line">Quarter = Quarter[::-1]</span><br><span class="line">GDP = GDP[::-1]</span><br><span class="line">Primary_industry = Primary_industry[::-1]</span><br><span class="line">Secondary_industry = Secondary_industry[::-1]</span><br><span class="line">Tertiary_industry = Tertiary_industry[::-1]</span><br><span class="line"></span><br><span class="line">line = Line(&apos;中国国内生产总值同比增长率&apos;, &apos;时间：2006年第1季度-2020年第1季度  数据来源：东方财富网&apos;, width=1280, height=720)</span><br><span class="line">line.add(&apos;国内生产总值&apos;, Quarter, GDP, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;], legend_pos=&apos;right&apos;)</span><br><span class="line">line.add(&apos;第一产业&apos;, Quarter, Primary_industry, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;],</span><br><span class="line">         legend_pos=&apos;right&apos;)</span><br><span class="line">line.add(&apos;第二产业&apos;, Quarter, Secondary_industry, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;],</span><br><span class="line">         legend_pos=&apos;right&apos;)</span><br><span class="line">line.add(&apos;第三产业&apos;, Quarter, Tertiary_industry, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;],</span><br><span class="line">         legend_pos=&apos;right&apos;)</span><br><span class="line">line.render(&apos;中国国内生产总值.html&apos;)</span><br></pre></td></tr></table></figure>
<h2 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h2><p>&emsp;&emsp;保存有近15年中国GDP数据的CSV文件如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200424181349773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;绘制的折线图如下图所示（注：国内生产总值、第二产业、第三产业的平均值恰好都为0.09，故平均值线重合）：<br><img src="https://img-blog.csdnimg.cn/20200424181421710.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/04/17/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E3%80%91%E6%9C%AA%E6%9D%A515%E5%A4%A9%E6%B0%94%E6%B8%A9%E8%B5%B0%E5%8A%BF%E5%9B%BE/">
                【Python网络爬虫与数据可视化实战案例】未来15天气温走势图
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-04-17</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h2><p>&emsp;&emsp;打开<a href="https://www.tianqi.com/" target="_blank" rel="noopener">天气网</a>，点击上方城市名称，再点击“15天天气”，进入如下页面。这里以天津为例。<br><img src="https://img-blog.csdnimg.cn/20200417100135778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200417100219388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200417100041540.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;可以看到，这里是有未来15天的天气和气温状况的。我们要做的就是把每天的最高和最低气温爬取下来，并做成折线图的形式。  </p>
<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><p>&emsp;&emsp;任意选取一天的气温，单击鼠标右键检查元素（这里我使用的是Firefox浏览器，不同浏览器可能略有不同）进入查看器。我们得到了下图所示的HTML结构。<br><img src="https://img-blog.csdnimg.cn/20200417100539947.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;可以看出，每一天的天气信息都存储在<code>class</code>属性为<code>table_day</code>的<code>div</code>标签之中，而气温信息则存储在<code>div</code>标签内部的<code>class</code>属性为<code>temp</code>的<code>li</code>标签之中。那么，我们只需要定位到这个标签，对该标签内的文本进行提取，即可获得这15天的最高气温和最低气温。  </p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>&emsp;&emsp;首先我们需要导入相关的模块。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">import requests</span><br><span class="line">from pyecharts import Line</span><br><span class="line">from bs4 import BeautifulSoup</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;对网站发起请求，获取页面的数据。即进行UA伪装后对URL发起GET请求。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:75.0) Gecko/20100101 Firefox/75.0&apos;&#125;</span><br><span class="line">url = &apos;https://www.tianqi.com/tianjin/15/&apos;</span><br><span class="line">response = requests.get(url=url, headers=headers)</span><br><span class="line">page_text = response.text</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;筛选出有关气温信息的内容。<br>&emsp;&emsp;在筛选出<code>class</code>属性为<code>temp</code>的<code>li</code>标签的文本之后，我使用了正则表达式来分离最高气温值与最低气温值，并保存到对应的列表中。以波浪线作为切入点，波浪线前的数字即为最低气温，波浪线后的数字即为最高气温。获取正则匹配的文本之后，对字符串进行切片，然后使用<code>eval()</code>函数将其转化为数字形式存放在列表中。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(page_text, &apos;html.parser&apos;)</span><br><span class="line">div_list = soup.find_all(class_=&apos;box_day&apos;)</span><br><span class="line">table_day_list = div_list[0].find_all(class_=&apos;table_day&apos;)</span><br><span class="line">low_temp = []</span><br><span class="line">high_temp = []</span><br><span class="line">for i in range(len(table_day_list)):</span><br><span class="line">    li = table_day_list[i].find(class_=&apos;temp&apos;).text</span><br><span class="line">    low = eval(re.search(r&apos;(\d*)~&apos;, li).group()[:-1])</span><br><span class="line">    low_temp.append(low)</span><br><span class="line">    high = eval(re.search(r&apos;~(\d*)&apos;, li).group()[1:])</span><br><span class="line">    high_temp.append(high)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;最后一步，使用pyecharts模块进行数据可视化。<br>&emsp;&emsp;这里我偷了个懒，<code>attr</code>列表中的内容是可以在筛选数据的过程中一并获取的。写代码的时候为了方便就自己写了<code>attr</code>列表。这样写有个缺点，就是在做下一次的15天气温预报的时候需要手动更改<code>attr</code>列表中的元素。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">attr = [&apos;2020-04-16&apos;, &apos;2020-04-17&apos;, &apos;2020-04-18&apos;, &apos;2020-04-19&apos;, &apos;2020-04-20&apos;, &apos;2020-04-21&apos;, &apos;2020-04-22&apos;, &apos;2020-04-23&apos;,</span><br><span class="line">        &apos;2020-04-24&apos;, &apos;2020-04-25&apos;, &apos;2020-04-26&apos;, &apos;2020-04-27&apos;, &apos;2020-04-28&apos;, &apos;2020-04-29&apos;, &apos;2020-04-30&apos;]</span><br><span class="line">line = Line(&apos;天津未来15天的气温走势&apos;, &apos;日期：2020-04-16至2020-04-30&apos;)</span><br><span class="line">line.add(&apos;日最低气温&apos;, attr, low_temp, is_smooth=False, mark_point=[&apos;min&apos;], mark_line=[&apos;average&apos;])</span><br><span class="line">line.add(&apos;日最高气温&apos;, attr, high_temp, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;])</span><br><span class="line">line.render(&apos;天津未来15天气温走势图.html&apos;)</span><br></pre></td></tr></table></figure>
<h2 id="完整代码及结果展示"><a href="#完整代码及结果展示" class="headerlink" title="完整代码及结果展示"></a>完整代码及结果展示</h2><p>&emsp;&emsp;该样例的完整代码如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">import re</span><br><span class="line">import requests</span><br><span class="line">from pyecharts import Line</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line"># 爬取天气网天津2020-04-16至2020-04-30的最高和最低气温</span><br><span class="line">headers = &#123;&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:75.0) Gecko/20100101 Firefox/75.0&apos;&#125;</span><br><span class="line">url = &apos;https://www.tianqi.com/tianjin/15/&apos;</span><br><span class="line">response = requests.get(url=url, headers=headers)</span><br><span class="line">page_text = response.text</span><br><span class="line"></span><br><span class="line"># 筛选出所需数据</span><br><span class="line">soup = BeautifulSoup(page_text, &apos;html.parser&apos;)</span><br><span class="line">div_list = soup.find_all(class_=&apos;box_day&apos;)</span><br><span class="line">table_day_list = div_list[0].find_all(class_=&apos;table_day&apos;)</span><br><span class="line">low_temp = []</span><br><span class="line">high_temp = []</span><br><span class="line">for i in range(len(table_day_list)):</span><br><span class="line">    li = table_day_list[i].find(class_=&apos;temp&apos;).text</span><br><span class="line">    low = eval(re.search(r&apos;(\d*)~&apos;, li).group()[:-1])</span><br><span class="line">    low_temp.append(low)</span><br><span class="line">    high = eval(re.search(r&apos;~(\d*)&apos;, li).group()[1:])</span><br><span class="line">    high_temp.append(high)</span><br><span class="line"></span><br><span class="line"># 数据可视化</span><br><span class="line">attr = [&apos;2020-04-16&apos;, &apos;2020-04-17&apos;, &apos;2020-04-18&apos;, &apos;2020-04-19&apos;, &apos;2020-04-20&apos;, &apos;2020-04-21&apos;, &apos;2020-04-22&apos;, &apos;2020-04-23&apos;,</span><br><span class="line">        &apos;2020-04-24&apos;, &apos;2020-04-25&apos;, &apos;2020-04-26&apos;, &apos;2020-04-27&apos;, &apos;2020-04-28&apos;, &apos;2020-04-29&apos;, &apos;2020-04-30&apos;]</span><br><span class="line">line = Line(&apos;天津未来15天的气温走势&apos;, &apos;日期：2020-04-16至2020-04-30&apos;)</span><br><span class="line">line.add(&apos;日最低气温&apos;, attr, low_temp, is_smooth=False, mark_point=[&apos;min&apos;], mark_line=[&apos;average&apos;])</span><br><span class="line">line.add(&apos;日最高气温&apos;, attr, high_temp, is_smooth=False, mark_point=[&apos;max&apos;], mark_line=[&apos;average&apos;])</span><br><span class="line">line.render(&apos;天津未来15天气温走势图.html&apos;)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;运行这个程序可以得到一个HTML文件。使用浏览器打开，得到下图所示的结果：<br><img src="https://img-blog.csdnimg.cn/20200417102754913.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/03/25/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0%E3%80%91%E4%BF%A1%E6%81%AF%E6%A0%87%E8%AE%B0%E4%B8%8E%E6%8F%90%E5%8F%96%E6%96%B9%E6%B3%95/">
                【Python网络爬虫笔记】信息标记与提取方法
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-03-25</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p><strong>学习资源</strong>：<a href="https://www.icourse163.org/learn/BIT-1001870001?tid=1001962001#/learn/announce" target="_blank" rel="noopener">中国大学MOOC Python网络爬虫与信息提取 北京理工大学计算机学院 嵩天</a>  </p>
<hr>
<h2 id="信息标记的三种形式"><a href="#信息标记的三种形式" class="headerlink" title="信息标记的三种形式"></a>信息标记的三种形式</h2><p>&emsp;&emsp;在学习信息标记的三种形式之前，我们有必要了解一下信息标记的作用。<br>&emsp;&emsp;1.标记后的信息可形成信息组织结构，增加了信息维度。<br>&emsp;&emsp;2.标记的结构与信息一样具有重要价值。<br>&emsp;&emsp;3.标记后的信息可用于通信、存储或展示。<br>&emsp;&emsp;4.标记后的信息更利于程序理解和运用。<br>&emsp;&emsp;信息标记的三种形式分别为XML（Extensible Markup Language，可扩展标记语言）、JSON（JavaScript Object Notation，JS对象简谱）和YAML（YAML Ain’t Markup Language，在开发这种语言时，YAML 的意思其实是”Yet Another Markup Language”，但为了强调这种语言以数据做为中心，而不是以标记语言为重点，而用反向缩略语重命名）。  </p>
<h2 id="XML-Extensible-Markup-Language"><a href="#XML-Extensible-Markup-Language" class="headerlink" title="XML (Extensible Markup Language)"></a>XML (Extensible Markup Language)</h2><p>&emsp;&emsp;XML有以下三种写法：<code>&lt;name&gt; ... &lt;/name&gt;</code>、<code>&lt;name /&gt;</code>（空元素的缩写形式）和<code>&lt;!--  --&gt;</code>（注释书写形式）。<br><img src="https://img-blog.csdnimg.cn/20200325151423199.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200325151456218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="JSON-JavaScript-Object-Notation"><a href="#JSON-JavaScript-Object-Notation" class="headerlink" title="JSON (JavaScript Object Notation)"></a>JSON (JavaScript Object Notation)</h2><p>&emsp;&emsp;JSON以有类型的键值对<code>key: value</code>来表示，形式上非常类似于Python的字典。JSON有以下三种书写形式。<br>&emsp;&emsp;1.单值书写形式，例如<code>&quot;name&quot;: &quot;西安邮电大学&quot;</code>。其中<code>&quot;&quot;</code>为类型，<code>&quot;name&quot;</code>为键（key），<code>&quot;西安邮电大学&quot;</code>为值（value）。<br>&emsp;&emsp;2.多值书写形式，例如<code>&quot;name&quot;: [&quot;西安邮电大学&quot;, &quot;陕西师范大学&quot;, &quot;西北政法大学&quot;]</code>。即多值用<code>[,]</code>组织。<br>&emsp;&emsp;3.键值对嵌套，例如：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;name&quot;: &#123;</span><br><span class="line">         &quot;oldName&quot;: &quot;西安邮电学院&quot;,</span><br><span class="line">         &quot;newName&quot;: &quot;西安邮电大学&quot;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>即键值对嵌套用<code>{,}</code>组织。  </p>
<h2 id="YAML-YAML-Ain’t-Markup-Language"><a href="#YAML-YAML-Ain’t-Markup-Language" class="headerlink" title="YAML (YAML Ain’t Markup Language)"></a>YAML (YAML Ain’t Markup Language)</h2><p>&emsp;&emsp;YAML与JSON非常相似，它是以无类型的键值对<code>key: value</code>来表示。<br>&emsp;&emsp;YAML的缩进表达所属关系，例如：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name:</span><br><span class="line">    oldName: 西安邮电学院</span><br><span class="line">    newName: 西安邮电大学</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;YAML的<code>-</code>表达并列关系，例如：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name:</span><br><span class="line">-西安邮电大学</span><br><span class="line">-陕西师范大学</span><br><span class="line">-西北政法大学</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;YAML的<code>|</code>表达整块数据，<code>#</code>表示注释，例如：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text: |    # 学校介绍</span><br><span class="line">西安邮电大学前身是1950年成立的陕西和甘肃两省邮电人员训练班及随后的西安邮电学校。1959年经国务院批准设立西安邮电学院，是国家在西北地区布局的唯一邮电通信类普通高校。2000年划归陕西省，实行中央与地方共建，以陕西省管理为主的管理体制。2012年3月，经教育部批准更名为西安邮电大学。</span><br></pre></td></tr></table></figure>

<h2 id="三种信息标记形式的比较"><a href="#三种信息标记形式的比较" class="headerlink" title="三种信息标记形式的比较"></a>三种信息标记形式的比较</h2><p>&emsp;&emsp;下面是三种信息标记形式的实例：<br><img src="https://img-blog.csdnimg.cn/2020032515431347.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200325154331266.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200325154344940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>信息标记形式|说明|适用于<br>——|——|——<br>XML|最早的通用信息标记语言，可扩展性好，但繁琐|Internet上的信息交互与传递<br>JSON|信息有类型，适合程序处理（JS），较XML简洁|移动应用云端和节点的信息通信，无注释<br>YAML|信息无类型，文本信息比例最高，可读性好|各类系统的配置文件，有注释易读</p>
<h2 id="信息提取的一般方法"><a href="#信息提取的一般方法" class="headerlink" title="信息提取的一般方法"></a>信息提取的一般方法</h2><p>&emsp;&emsp;方法一：<strong>完整解析信息的标记形式，再提取关键信息</strong>。这种方法需要标记解析器（例如bs4库的标签树遍历），优点是信息解析准确，缺点是提取过程繁琐，速度慢。<br>&emsp;&emsp;方法二：<strong>无视标记形式，直接搜索关键信息</strong>。优点是提取过程简洁，缺点是提取结果准确性与信息内容相关。<br>&emsp;&emsp;融合方法：<strong>结合形式解析与搜索方法，提取关键信息</strong>。需要标记解析器及文本查找函数。  </p>
<h2 id="基于bs4的HTML内容查找方法"><a href="#基于bs4的HTML内容查找方法" class="headerlink" title="基于bs4的HTML内容查找方法"></a>基于bs4的HTML内容查找方法</h2><p>&emsp;&emsp;常用方法：<code>&lt;&gt;.find_all()</code>。它返回一个列表类型，存储查找的结果。<br><img src="https://img-blog.csdnimg.cn/20200325155521487.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;<code>&lt;tag&gt;(...)</code>等价于<code>&lt;tag&gt;.find_all(...)</code>，<code>soup(...)</code>等价于<code>soup.find_all()</code>。<br>&emsp;&emsp;下表是一些扩展方法：<br><img src="https://img-blog.csdnimg.cn/20200325155827315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/03/24/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0%E3%80%91BeautifulSoup%E6%A8%A1%E5%9D%97%E5%9F%BA%E7%A1%80/">
                【Python网络爬虫笔记】BeautifulSoup模块
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-03-24</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p><strong>学习资源</strong>：<a href="https://www.icourse163.org/learn/BIT-1001870001?tid=1001962001#/learn/announce" target="_blank" rel="noopener">中国大学MOOC Python网络爬虫与信息提取 北京理工大学计算机学院 嵩天</a>  </p>
<hr>
<h2 id="安装BeautifulSoup模块"><a href="#安装BeautifulSoup模块" class="headerlink" title="安装BeautifulSoup模块"></a>安装BeautifulSoup模块</h2><p>&emsp;&emsp;和requests模块一样，如果使用Anaconda 3的话，是自带BeautifulSoup模块的。如果没有BeautifulSoup模块的话，只需要以管理员身份打开cmd，输入命令<code>pip install beautifulsoup4</code>即可安装。  </p>
<h2 id="BeautifulSoup的基本元素"><a href="#BeautifulSoup的基本元素" class="headerlink" title="BeautifulSoup的基本元素"></a>BeautifulSoup的基本元素</h2><p>&emsp;&emsp;BeautifulSoup是解析、遍历、维护“标签树”的功能库。<br><img src="https://img-blog.csdnimg.cn/20200324201521332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324201541942.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;要想引用BeautifulSoup模块，我们需要以下面的语句来导入：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import bs4</span><br></pre></td></tr></table></figure>
<p>即主要是用BeautifulSoup类。<br><img src="https://img-blog.csdnimg.cn/20200324203426379.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;下表是对BeautifulSoup库解析器的说明：<br>解析器|使用方法|条件<br>——|——|——<br>bs4的HTML解析器|BeautifulSoup(mk, ‘html.parser’)|安装bs4库<br>lxml的HTML解析器|BeautifulSoup(mk, ‘lxml’)|pip install lxml<br>lxml的XML解析器|BeautifulSoup(mk, ‘xml’)|pip install lxml<br>html5lib的解析器|BeautifulSoup(mk, ‘html5lib’)|pip install html5lib</p>
<p>&emsp;&emsp;下面来简单说明BeautifulSoup类的基本元素：<br>基本元素|说明<br>——|——<br>Tag|标签，最基本的信息组织单元，分别用&lt;&gt;和&lt;/&gt;标明开头和结尾<br>Name|标签的名字，&lt;p&gt;…&lt;/p&gt;的名字是“p”，格式：&lt;tag&gt;.name<br>Attributes|标签的属性，字典形式组织，格式：&lt;tag&gt;.attrs<br>NavigableString|标签内非属性字符串，&lt;&gt;…&lt;/&gt;中字符串，格式：&lt;tag&gt;.string<br>Comment|标签内字符串的注释部分，一种特殊的Comment类型</p>
<p><img src="https://img-blog.csdnimg.cn/20200324205435707.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324205450962.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324205508452.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324205529537.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324205543114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324205608809.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="基于bs4的HTML内容遍历方法"><a href="#基于bs4的HTML内容遍历方法" class="headerlink" title="基于bs4的HTML内容遍历方法"></a>基于bs4的HTML内容遍历方法</h2><p>&emsp;&emsp;HTML的基本格式是：&lt;&gt;…&lt;/&gt;构成了所属关系，形成了标签的树形结构，如下图所示：<br><img src="https://img-blog.csdnimg.cn/2020032421113193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;对标签树的遍历可以分为三种：下行遍历、上行遍历和平行遍历。<br><img src="https://img-blog.csdnimg.cn/20200324211329389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>标签树的下行遍历</strong><br>属性|说明<br>——|——<br>.contents|子节点的列表，将&lt;tag&gt;所有儿子节点存入列表<br>.children|子节点的迭代类型，与.contents类似，用于循环遍历儿子节点<br>.descendants|子孙节点的迭代类型，包含所有子孙节点，用于循环遍历</p>
<p>&emsp;&emsp;BeautifulSoup类型是标签树的根节点。  </p>
<p><strong>标签树的上行遍历</strong><br>属性|说明<br>——|——<br>.parent|节点的父亲标签<br>.parents|节点先辈标签的迭代类型，用于循环遍历先辈节点</p>
<p><strong>标签树的平行遍历</strong><br>属性|说明<br>——|——<br>.next_sibling|返回按照HTML文本顺序的下一个平行节点标签<br>.previous_sibling|返回按照HTML文本顺序的上一个平行节点标签<br>.next_siblings|迭代类型，返回按照HTML文本顺序的后续所有平行节点标签<br>.previous_siblings|迭代类型，返回按照HTML文本顺序的前续所有平行节点标签</p>
<p><img src="https://img-blog.csdnimg.cn/20200324212731322.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200324212755118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="基于bs4的HTML格式输出"><a href="#基于bs4的HTML格式输出" class="headerlink" title="基于bs4的HTML格式输出"></a>基于bs4的HTML格式输出</h2><p><strong>prettify()方法</strong><br>&emsp;&emsp;<code>prettify()</code>为HTML文本&lt;&gt;及其内容增加<code>\n</code>。该方法可用于标签，语法为<code>&lt;tag&gt;.prettify()</code>。<br><img src="https://img-blog.csdnimg.cn/20200324213122609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>bs4的编码</strong><br>&emsp;&emsp;bs4将任何HTML输入都变成utf-8编码。<br><img src="https://img-blog.csdnimg.cn/20200324213241216.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/03/23/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0%E3%80%91requests%E6%A8%A1%E5%9D%97%E5%9F%BA%E7%A1%80/">
                '【Python网络爬虫笔记】requests模块'
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-03-23</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p><strong>学习资源</strong>：<a href="https://www.icourse163.org/learn/BIT-1001870001?tid=1001962001#/learn/announce" target="_blank" rel="noopener">中国大学MOOC Python网络爬虫与信息提取 北京理工大学计算机学院 嵩天</a>  </p>
<hr>
<h2 id="安装requests模块"><a href="#安装requests模块" class="headerlink" title="安装requests模块"></a>安装requests模块</h2><p>&emsp;&emsp;我使用的是Anaconda 3，其中自带了requests模块供我们使用。如果没有requests模块的话，只需要以管理员身份打开cmd，输入命令<code>pip install requests</code>即可。  </p>
<h2 id="requests模块的7个主要方法"><a href="#requests模块的7个主要方法" class="headerlink" title="requests模块的7个主要方法"></a>requests模块的7个主要方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>requests.request()</td>
<td>构造一个请求，是支撑以下各方法的基础方法</td>
</tr>
<tr>
<td>requests.get()</td>
<td>获取HTML网页的主要方法，对应于HTTP的GET</td>
</tr>
<tr>
<td>requests.head()</td>
<td>获取HTML网页头信息，对应于HTTP的HEAD</td>
</tr>
<tr>
<td>requests.post()</td>
<td>向HTML网页提交POST请求，对应于HTTP的POST</td>
</tr>
<tr>
<td>requests.put()</td>
<td>向HTML网页提交PUT请求，对应于HTTP的PUT</td>
</tr>
<tr>
<td>requests.patch()</td>
<td>向HTML网页提交局部修改请求，对应于HTTP的PATCH</td>
</tr>
<tr>
<td>requests.delete()</td>
<td>向HTML网页提交删除请求，对应于HTTP的DELETE</td>
</tr>
</tbody></table>
<p><strong>1.requests.request()</strong><br><strong>语法</strong><br><code>requests.request(method, url, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>method</code>：请求方式，包括GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS。<br>(2)<code>url</code>：拟获取页面的URL链接。<br>(3)<code>**kwargs</code>：控制访问的参数，共13个，均为可选项。  </p>
<table>
<thead>
<tr>
<th>**kwargs参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>params</td>
<td>字典或字节序列，作为参数增加到URL中</td>
</tr>
<tr>
<td>data</td>
<td>字典、字节序列或文件对象，作为Request的内容</td>
</tr>
<tr>
<td>json</td>
<td>JSON格式的数据，作为Request的内容</td>
</tr>
<tr>
<td>headers</td>
<td>字典，HTTP定制头</td>
</tr>
<tr>
<td>cookies</td>
<td>字典或CookieJar，Request中的cookie</td>
</tr>
<tr>
<td>auth</td>
<td>元组，支持HTTP认证功能</td>
</tr>
<tr>
<td>files</td>
<td>字典，传输文件</td>
</tr>
<tr>
<td>timeout</td>
<td>设定超时时间（单位：秒）</td>
</tr>
<tr>
<td>proxies</td>
<td>字典，设定访问代理服务器，可以增加登录认证</td>
</tr>
<tr>
<td>allow_redirects</td>
<td>True（默认）或False，重定向开关</td>
</tr>
<tr>
<td>stream</td>
<td>True（默认）或False，获取内容立即下载开关</td>
</tr>
<tr>
<td>verify</td>
<td>True（默认）或False，认定SSL证书开关</td>
</tr>
<tr>
<td>cert</td>
<td>本地SSL证书路径</td>
</tr>
</tbody></table>
<p><strong>2.requests.get()</strong><br><strong>语法</strong><br><code>requests.get(url, params=None, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>url</code>：拟获取页面的URL链接。<br>(2)<code>params</code>：URL中的额外参数，字典或字节流格式。<br>(3)<code>**kwargs</code>：12个控制访问的参数。  </p>
<p><strong>3.requests.head()</strong><br><strong>语法</strong><br><code>requests.head(url, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>url</code>：拟获取页面的URL链接。<br>(2)<code>**kwargs</code>：12个控制访问的参数。  </p>
<p><strong>4.requests.post()</strong><br><strong>语法</strong><br><code>requests.post(url, data=None, json=None, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>url</code>：拟更新页面的URL链接。<br>(2)<code>data</code>：字典、字节序列或文件，Request的内容。<br>(3)<code>json</code>：JSON格式的数据，Request的内容。<br>(4)<code>**kwargs</code>：12个控制访问的参数。  </p>
<p><strong>5.requests.put()</strong><br><strong>语法</strong><br><code>requests.put(url, data=None, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>url</code>：拟更新页面的URL链接。<br>(2)<code>data</code>：字典、字节序列或文件，Request的内容。<br>(3)<code>**kwargs</code>：12个控制访问的参数。  </p>
<p><strong>6.requests.patch()</strong><br><strong>语法</strong><br><code>requests.patch(url, data=None, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>url</code>：拟更新页面的URL链接。<br>(2)<code>data</code>：字典、字节序列或文件，Request的内容。<br>(3)<code>**kwargs</code>：12个控制访问的参数。  </p>
<p><strong>7.requests.delete()</strong><br><strong>语法</strong><br><code>requests.delete(url, **kwargs)</code><br><strong>参数说明</strong><br>(1)<code>url</code>：拟删除页面的URL链接。<br>(2)<code>**kwargs</code>：12个控制访问的参数。  </p>
<h2 id="requests模块的2个重要对象"><a href="#requests模块的2个重要对象" class="headerlink" title="requests模块的2个重要对象"></a>requests模块的2个重要对象</h2><p><img src="https://img-blog.csdnimg.cn/20200323164044630.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;Response对象包含服务器返回的所有信息，也包含请求的Request信息。下表是Response对象的属性：  </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>r.status_code</td>
<td>HTTP请求的返回状态，200表示连接成功，404表示失败</td>
</tr>
<tr>
<td>r.text</td>
<td>HTTP响应内容的字符串形式，即url对应的页面内容</td>
</tr>
<tr>
<td>r.encoding</td>
<td>从HTTP header中猜测的响应内容编码方式</td>
</tr>
<tr>
<td>r.appartment_encoding</td>
<td>从内容中分析出的响应内容编码方式（备选编码方式）</td>
</tr>
<tr>
<td>r.content</td>
<td>HTTP响应内容的二进制形式</td>
</tr>
</tbody></table>
<p>&emsp;&emsp;下面针对Response的编码进行说明。<br>&emsp;&emsp;<code>r.encoding</code>：如果header中不存在charset，则认为编码为ISO-8859-1，<code>r.text</code>根据<code>r.coding</code>显示网页内容。<br>&emsp;&emsp;<code>r.apparent_encoding</code>：根据网页内容分析出的编码方式，可以看作是<code>r.encoding</code>的备选。  </p>
<h2 id="爬取网页的通用代码框架"><a href="#爬取网页的通用代码框架" class="headerlink" title="爬取网页的通用代码框架"></a>爬取网页的通用代码框架</h2><p>&emsp;&emsp;首先我们要理解requests模块的异常。网络连接是有风险的，所以异常处理很重要。下表是对requests模块的异常的说明：<br>异常|说明<br>——|——<br>requests.ConnectionError|网络连接错误异常，如DNS查询失败、拒绝连接等<br>requests.HTTPError|HTTP错误异常<br>requests.URLRequired|URL缺失异常<br>requests.TooManyRedirects|超过最大重定向次数，产生重定向异常<br>requests.ConnectTimeout|连接远程服务器超时异常<br>requests.Timeout|请求URL超时，产生超时异常</p>
<p>&emsp;&emsp;下面是爬取网页的通用代码框架：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def getHTMLText(url):</span><br><span class="line">    try:</span><br><span class="line">        r = requests.get(url, timeout=30)</span><br><span class="line">        r.raise_for_status()    # 如果状态不是200，引发HTTPError异常</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        return r.text</span><br><span class="line">    except:</span><br><span class="line">        return &apos;产生异常&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    url = &apos;http://www.baidu.com&apos;</span><br><span class="line">    print(getHTMLText(url))</span><br></pre></td></tr></table></figure>

<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><p>&emsp;&emsp;HTTP是Hypertext Transfer Protocol的缩写，中文名称为超文本传输协议。URL是通过HTTP协议存取资源的Internet路径，一个URL对应一个数据资源。<br>&emsp;&emsp;下表是HTTP协议对资源的操作：<br>方法|说明<br>——|——<br>GET|请求获取URL位置的资源<br>HEAD|请求获取URL位置资源的响应消息报告，即获得该资源的头部信息<br>POST|请求向URL位置的资源后附加新的数据<br>PUT|请求向URL位置存储一个资源，覆盖原URL位置的资源<br>PATCH|请求局部更新URL位置的资源，即改变该处资源的部分内容<br>DELETE|请求删除URL位置存储的资源</p>
<p>&emsp;&emsp;通过URL和命令管理资源，操作独立无状态，网络通道及服务器成为了黑盒子。<br>&emsp;&emsp;下面来讨论PATCH和PUT的区别。我们假设URL位置有一组数据UserInfo，包括UserID、UserName等20个字段。我们的需求是用户修改UserName，其他不变。如果采用PATCH，则仅向URL提交UserName的局部更新请求。如果采用PUT，则必须将所有字段一并提交到URL，未提交字段被删除。PATCH的最主要好处是节省网络带宽。  </p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/03/16/%E5%AE%9E%E9%AA%8C%E5%AE%A420200314%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%BB%BB%E5%8A%A1%E6%80%BB%E7%BB%93/">
                实验室20200314数据处理任务总结
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-03-16</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>如果你想获取数据集和代码，<a href="https://github.com/CCH21/Lab_MLGroup_Tasks/tree/master/Task_20200314" target="_blank" rel="noopener">请点这里</a>。  </p>
<hr>
<h2 id="任务描述"><a href="#任务描述" class="headerlink" title="任务描述"></a>任务描述</h2><p><strong>基本要求</strong><br>把样本文件中的数据按下面的样例格式写入输出文件。需要注意的是，输入文件中所有的<code>暂无数据</code>均按<code>暂无</code>写入输出文件，所有的<code>None</code>均按<code>NULL</code>写入输出文件。样本文件中共240条数据。<br><strong>输入文件样例</strong><br>样本文件ori_data的数据样例如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tue Mar 19 16:23:02 2019,杭州租房网 &gt;  萧山租房 &gt;  钱江世纪城租房 &gt;   佳境天城人合苑租房  , 合租·佳境天城人合苑4室1厅, 2430元/月(季付价), 公寓 独立卫生间 近地铁 押一付一 随时看房 , 合租 4室1厅2卫 16㎡ 朝南  房屋信息  基本信息 发布：12天前 入住：随时入住   租期：暂无数据 看房：随时可看   楼层：5/18层 电梯：暂无数据   车位：暂无数据 用水：暂无数据   用电：暂无数据 燃气：暂无数据   采暖：暂无数据  ,None, 地址和交通距离地铁2号线-振宁路329m, end </span><br><span class="line">Tue Mar 19 16:23:02 2019,杭州租房 &gt;  滨江租房 &gt;  浦沿租房 &gt;   朗诗寓·东信大道店租房  , None,  朗诗寓·东信大道店  2550元/月起  ,None, None, None, None, 地址和交通, end</span><br></pre></td></tr></table></figure>
<p><strong>输出文件样例</strong><br>输出文件dea_data的数据样例如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tue Mar 19 杭州  萧山  钱江世纪城  佳境天城人合苑 2430元/月 16㎡ 4室 2卫 1厅 朝南 5/18层 NULL 随时入住 暂无 暂无 暂无 暂无 暂无 暂无</span><br><span class="line">Tue Mar 19 杭州  滨江  浦沿  朗诗寓·东信大道店 2550元/月 NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL</span><br></pre></td></tr></table></figure>
<h2 id="任务分析"><a href="#任务分析" class="headerlink" title="任务分析"></a>任务分析</h2><p>&emsp;&emsp;首先我注意到的一点是，样本文件是Unix(LF)格式的，可能需要考虑一下文件编码格式的问题。<br><img src="https://img-blog.csdnimg.cn/20200316213827242.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;其次，不难发现每一行的数据之间都是以逗号为分隔符，这是在提醒我们使用Python的csv模块来进行处理。<br>&emsp;&emsp;在处理之前，应当先清洗掉那些没有用处的数据，这样可以使后面的处理工作条理更加清晰。<br>&emsp;&emsp;输出样例是有特定的格式的，我们可以导入Python的re模块，利用正则表达式来进行数据的筛选。  </p>
<h2 id="源代码及简单说明"><a href="#源代码及简单说明" class="headerlink" title="源代码及简单说明"></a>源代码及简单说明</h2><p>&emsp;&emsp;关于程序的说明已经通过注释的形式写在了下面的代码里。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">import csv</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">with open(&apos;ori_data&apos;, mode=&apos;r&apos;, encoding=&apos;utf-8&apos;, newline=&apos;&apos;) as csv_in_file:</span><br><span class="line">    with open(&apos;dea_data_output&apos;, mode=&apos;w&apos;, newline=&apos;&apos;) as out_file:</span><br><span class="line">        filereader = csv.reader(csv_in_file)</span><br><span class="line">        for row_list in filereader:</span><br><span class="line">            # 创建要写入输出文件的输出字符串</span><br><span class="line">            out_str = &apos;&apos;</span><br><span class="line"></span><br><span class="line">            # 删去共有的无用信息</span><br><span class="line">            row_list.pop()</span><br><span class="line">            row_list.pop(2)</span><br><span class="line">            row_list.pop(3)</span><br><span class="line"></span><br><span class="line">            # 修改前三列的数据</span><br><span class="line">            row_list[0] = re.search(r&apos;Tue Mar 19&apos;, row_list[0]).group()</span><br><span class="line">            row_list[1] = &apos;&apos;.join(row_list[1].split())</span><br><span class="line">            row_list[1] = &apos;&apos;.join(row_list[1].replace(&apos;&gt;&apos;, &apos;&apos;).replace(&apos;租房&apos;, &apos;  &apos;).replace(&apos;网&apos;, &apos;&apos;).rstrip())</span><br><span class="line">            row_list[2] = re.search(r&apos;(\d*)元/月&apos;, row_list[2]).group()</span><br><span class="line"></span><br><span class="line">            # 根据列表长度删去各自的无用信息</span><br><span class="line">            if len(row_list) == 9:</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">            elif len(row_list) == 8:</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">            elif len(row_list) == 7:</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line">            elif len(row_list) == 6:</span><br><span class="line">                row_list.pop()</span><br><span class="line">                row_list.pop()</span><br><span class="line"></span><br><span class="line">            # 修改最后一列的信息</span><br><span class="line">            if row_list[-1].strip() == &apos;None&apos;:</span><br><span class="line">                row_list[-1] = &apos;NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL&apos;</span><br><span class="line">            else:</span><br><span class="line">                s = &apos;&apos;</span><br><span class="line">                # 房屋面积</span><br><span class="line">                s += re.search(r&apos;(\d*㎡)&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                # 室、卫、厅</span><br><span class="line">                s += re.search(r&apos;(\d*室)&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                s += re.search(r&apos;(\d*卫)&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                s += re.search(r&apos;(\d*厅)&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                # 房屋朝向</span><br><span class="line">                s += re.search(r&apos;朝\w&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                # 所在楼层</span><br><span class="line">                if re.search(r&apos;(\d*/\d*层)&apos;, row_list[-1]) is None:</span><br><span class="line">                    s += &apos;NULL&apos;</span><br><span class="line">                else:</span><br><span class="line">                    if re.search(r&apos;(\d*/\d*层)&apos;, row_list[-1]).group()[0] == &apos;/&apos;:</span><br><span class="line">                        s += &apos;NULL&apos;</span><br><span class="line">                    else:</span><br><span class="line">                        s += re.search(r&apos;(\d*/\d*层)&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                # 租期</span><br><span class="line">                if re.search(r&apos;(\d*~\d*年)&apos;, row_list[-1]) is None:</span><br><span class="line">                    s += &apos;NULL&apos;</span><br><span class="line">                else:</span><br><span class="line">                    s += re.search(r&apos;(\d*~\d*年)&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                # 入住</span><br><span class="line">                if re.search(r&apos;随时入住&apos;, row_list[-1]) is None:</span><br><span class="line">                    s += &apos;NULL&apos;</span><br><span class="line">                else:</span><br><span class="line">                    s += re.search(r&apos;随时入住&apos;, row_list[-1]).group()</span><br><span class="line">                s += &apos; &apos;</span><br><span class="line">                # 电梯</span><br><span class="line">                if re.search(r&apos;电梯：有&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;有 &apos;</span><br><span class="line">                elif re.search(r&apos;电梯：无&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;无 &apos;</span><br><span class="line">                elif re.search(r&apos;电梯：暂无数据&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;暂无 &apos;</span><br><span class="line">                # 车位</span><br><span class="line">                if re.search(r&apos;车位：免费&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;免费 &apos;</span><br><span class="line">                elif re.search(r&apos;车位：租用&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;租用 &apos;</span><br><span class="line">                elif re.search(r&apos;车位：暂无数据&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;暂无 &apos;</span><br><span class="line">                # 用水</span><br><span class="line">                if re.search(r&apos;用水：民水&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;民水 &apos;</span><br><span class="line">                elif re.search(r&apos;用水：商水&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;商水 &apos;</span><br><span class="line">                elif re.search(r&apos;用水：暂无数据&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;暂无 &apos;</span><br><span class="line">                # 用电</span><br><span class="line">                if re.search(r&apos;用电：民电&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;民电 &apos;</span><br><span class="line">                elif re.search(r&apos;用电：商电&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;商电 &apos;</span><br><span class="line">                elif re.search(r&apos;用电：暂无数据&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;暂无 &apos;</span><br><span class="line">                # 燃气</span><br><span class="line">                if re.search(r&apos;燃气：有&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;有 &apos;</span><br><span class="line">                elif re.search(r&apos;燃气：无&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;无 &apos;</span><br><span class="line">                elif re.search(r&apos;燃气：暂无数据&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;暂无 &apos;</span><br><span class="line">                # 采暖</span><br><span class="line">                if re.search(r&apos;采暖：自采暖&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;自采暖&apos;</span><br><span class="line">                elif re.search(r&apos;采暖：集中供暖&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;集中&apos;</span><br><span class="line">                elif re.search(r&apos;采暖：暂无数据&apos;, row_list[-1]):</span><br><span class="line">                    s += &apos;暂无&apos;</span><br><span class="line">                row_list[-1] = s</span><br><span class="line"></span><br><span class="line">            # 向输出字符串内添加信息</span><br><span class="line">            out_str += row_list[0] + &apos; &apos; + row_list[1] + &apos; &apos; + row_list[2] + &apos; &apos; + row_list[3] + &apos;\n&apos;</span><br><span class="line"></span><br><span class="line">            # 写入文件</span><br><span class="line">            out_file.write(out_str)</span><br></pre></td></tr></table></figure>
<h2 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h2><p>&emsp;&emsp;左侧的dea_data文件是原有的输出样例，右侧的dea_data_output文件是通过运行上面的程序得到的输出文件。<br><img src="https://img-blog.csdnimg.cn/20200316215154114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/03/01/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%8C%89%E8%AE%A1%E5%88%92%E8%87%AA%E5%8A%A8%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%EF%BC%88Windows%E7%B3%BB%E7%BB%9F%EF%BC%89/">
                Python数据分析基础之按计划自动运行脚本（Windows系统）
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-03-01</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&emsp;&emsp;我打算调整一下学习的路线。我的上一篇博客写的是数据分析基础的描述性统计与建模，但是由于我个人对于统计学知识的欠缺，在学习时看着书上的讲解经常会感觉一头雾水，仿佛在看天书一般。所以我决定先把书上最后一块内容——按计划自动运行脚本学完。<br>&emsp;&emsp;我的电脑是Windows 10操作系统的。我也没用过macOS和Unix系统的电脑，所以暂时只学习基于Windows操作系统的自动运行脚本。  </p>
<h2 id="任务计划程序"><a href="#任务计划程序" class="headerlink" title="任务计划程序"></a>任务计划程序</h2><p>&emsp;&emsp;在Windows系统和macOS系统中，都有可以定期运行脚本和其他可执行文件的程序。微软称这个程序为Task Scheduler0（任务计划程序）；在Unix系统和macOS系统中，这样的程序成为corn（定时任务）。<br>&emsp;&emsp;我们选择之前在应用程序那一章写过的3parse_text_file.py这个脚本作为例子。下图是它的存储路径。<br><img src="https://img-blog.csdnimg.cn/20200301202027800.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;接下来，打开<strong>控制面板</strong>，找到<strong>系统和安全→管理工具</strong>，然后双击<strong>任务计划程序</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301202540924.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200301202634354.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">&emsp;&emsp;在<strong>操作</strong>菜单中点击<strong>创建基本任务</strong>，并在创建基本任务向导中填写名称和描述，然后点击<strong>下一步</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301203156753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;接下来进入任务触发器界面。我们设置为<strong>每月</strong>运行一次脚本，然后点击<strong>下一步</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301203316312.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;之后，任务向导会转到每月标签页。我们在<strong>月</strong>设置<strong>选择所有的月份</strong>，在<strong>天</strong>设置<strong>最后一个</strong>，把<strong>开始时间</strong>设置为9:00:00，并勾选<strong>跨时区同步</strong>复选框。完成这些之后，点击<strong>下一步</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301203650512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;下面转到了操作标签页。我们选择<strong>启动程序</strong>，然后点击<strong>下一步</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301204041116.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;然后我们转到了启动程序标签页。我们把py文件的路径填写在<strong>程序或脚本</strong>栏，然后在<strong>添加参数（可选）</strong>栏填写输入文件和输出文件的路径。填写完毕，点击<strong>下一步</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301204324910.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;最后我们来到完成标签页。我们需要核实一下信息是否正确，如果核对无误，点击<strong>完成</strong>。<br><img src="https://img-blog.csdnimg.cn/20200301204809370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;我们返回任务计划程序主界面，点击<strong>任务计划程序库</strong>，我们可以看到刚刚创建的任务。<br><img src="https://img-blog.csdnimg.cn/20200301205129771.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/02/28/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1%E4%B8%8E%E5%BB%BA%E6%A8%A1(1)/">
                Python数据分析基础之描述性统计与建模(1)
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-02-28</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="葡萄酒质量数据集"><a href="#葡萄酒质量数据集" class="headerlink" title="葡萄酒质量数据集"></a>葡萄酒质量数据集</h2><p>&emsp;&emsp;葡萄酒质量数据集包括两个文件——红葡萄酒文件和白葡萄酒文件。红葡萄酒文件中包含1599条观测，白葡萄酒文件包含4898条观测。两个文件中都有1个输出变量和11个输入变量。输出变量是酒的质量，是一个从0（低质量）到10（高质量）的评分。输入变量是葡萄酒的物理化学成分和特性，包括非挥发性酸、挥发性酸、柠檬酸、残余糖分、氯化物、游离二氧化硫、总二氧化硫、密度、pH值、硫酸盐和酒精含量。<br>&emsp;&emsp;我们把这两个数据集合成一个数据集，保存在文件winequality-both.csv中。这个数据集中应该包括一个标题行和6497条。另外，还应该再添加一列，用来区分这行数据是红葡萄酒还是白葡萄酒的数据。<br>&emsp;&emsp;想要下载数据集？<a href="https://github.com/cbrownley/foundations-for-analytics-with-python/blob/master/statistics/winequality-both.csv" target="_blank" rel="noopener">点我</a>！<br><img src="https://img-blog.csdnimg.cn/2020022715304774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="描述性统计"><a href="#描述性统计" class="headerlink" title="描述性统计"></a>描述性统计</h2><p>&emsp;&emsp;我们来对这个数据集进行分析。首先，我们要计算出每列的总体描述性统计量、质量列中的唯一值以及和这个唯一值对应的观测数量。代码如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import seaborn as sns</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import statsmodels.api as sm</span><br><span class="line">import statsmodels.formula.api as smf</span><br><span class="line">from statsmodels.formula.api import ols, glm</span><br><span class="line"></span><br><span class="line"># 将数据集读入到pandas数据框中</span><br><span class="line">wine = pd.read_csv(&apos;winequality-both.csv&apos;, sep=&apos;,&apos;, header=0)</span><br><span class="line">wine.columns = wine.columns.str.replace(&apos; &apos;, &apos;_&apos;)</span><br><span class="line">print(wine.head())</span><br><span class="line"></span><br><span class="line"># 显示所有变量的描述性统计量</span><br><span class="line">print(wine.describe())</span><br><span class="line"></span><br><span class="line"># 找出唯一值</span><br><span class="line">print(sorted(wine.quality.unique()))</span><br><span class="line"></span><br><span class="line"># 计算值的频率</span><br><span class="line">print(wine.quality.value_counts())</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在使用pandas模块的<code>read_csv()</code>方法将文本文件读入一个pandas数据框之后，我们使用<code>head()</code>函数检查一下标题行和前五行数据，确保数据被正确加载。第17行代码使用pandas的<code>describe()</code>函数打印出数据集中每个数值型变量的摘要统计量。第20行代码使用<code>unique()</code>识别出质量列中的唯一值，并以升序打印在屏幕上。最后，第23行代码计算出质量列中每个唯一值在数据集中出现的次数，并把它们以降序打印到屏幕上。<br>&emsp;&emsp;这段代码的运行结果如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  type  fixed_acidity  volatile_acidity  ...  sulphates  alcohol  quality</span><br><span class="line">0  red            7.4              0.70  ...       0.56      9.4        5</span><br><span class="line">1  red            7.8              0.88  ...       0.68      9.8        5</span><br><span class="line">2  red            7.8              0.76  ...       0.65      9.8        5</span><br><span class="line">3  red           11.2              0.28  ...       0.58      9.8        6</span><br><span class="line">4  red            7.4              0.70  ...       0.56      9.4        5</span><br><span class="line"></span><br><span class="line">[5 rows x 13 columns]</span><br><span class="line">       fixed_acidity  volatile_acidity  ...      alcohol      quality</span><br><span class="line">count    6497.000000       6497.000000  ...  6497.000000  6497.000000</span><br><span class="line">mean        7.215307          0.339666  ...    10.491801     5.818378</span><br><span class="line">std         1.296434          0.164636  ...     1.192712     0.873255</span><br><span class="line">min         3.800000          0.080000  ...     8.000000     3.000000</span><br><span class="line">25%         6.400000          0.230000  ...     9.500000     5.000000</span><br><span class="line">50%         7.000000          0.290000  ...    10.300000     6.000000</span><br><span class="line">75%         7.700000          0.400000  ...    11.300000     6.000000</span><br><span class="line">max        15.900000          1.580000  ...    14.900000     9.000000</span><br><span class="line"></span><br><span class="line">[8 rows x 12 columns]</span><br><span class="line">[3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">6    2836</span><br><span class="line">5    2138</span><br><span class="line">7    1079</span><br><span class="line">4     216</span><br><span class="line">8     193</span><br><span class="line">3      30</span><br><span class="line">9       5</span><br><span class="line">Name: quality, dtype: int64</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;输出显示，质量评分中有6497个观测，评分范围从3到9，平均质量评分为5.8，标准差为0.87；质量列中的唯一值是3、4、5、6、7、8和9；有2836个观测的质量评分为6，2138个观测的质量评分为5，1079个观测的质量评分为7，216个观测的质量评分为4，193个观测的质量评分为8，30个观测的质量评分为3，5个观测的质量评分为9。</p>
<h2 id="分组、直方图与t检验"><a href="#分组、直方图与t检验" class="headerlink" title="分组、直方图与t检验"></a>分组、直方图与t检验</h2><p>&emsp;&emsp;下面我们分别分析红葡萄酒数据和白葡萄酒数据，看看统计量是否会保持不变。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"># 按照葡萄酒类型显示质量的描述性统计量</span><br><span class="line">print(wine.groupby(&apos;type&apos;)[[&apos;quality&apos;]].describe().unstack(&apos;type&apos;))</span><br><span class="line"></span><br><span class="line"># 按照葡萄酒类型显示质量的特定分位数值</span><br><span class="line">print(wine.groupby(&apos;type&apos;)[[&apos;quality&apos;]].quantile([0.25, 0.75]).unstack(&apos;type&apos;))</span><br><span class="line"></span><br><span class="line"># 按照葡萄酒类型查看质量分布</span><br><span class="line">red_wine = wine.loc[wine[&apos;type&apos;] == &apos;red&apos;, &apos;quality&apos;]</span><br><span class="line">white_wine = wine.loc[wine[&apos;type&apos;] == &apos;white&apos;, &apos;quality&apos;]</span><br><span class="line">sns.set_style(&quot;dark&quot;)</span><br><span class="line">print(sns.distplot(red_wine, norm_hist=True, kde=False, color=&quot;red&quot;, label=&quot;Red wine&quot;))</span><br><span class="line">print(sns.distplot(white_wine, norm_hist=True, kde=False, color=&quot;white&quot;, label=&quot;White wine&quot;))</span><br><span class="line">sns.utils.axlabel(&quot;Quality Score&quot;, &quot;Density&quot;)</span><br><span class="line">plt.title(&quot;Distribution of Quality by Wine Type&quot;)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"># 检验红葡萄酒和白葡萄酒的平均质量是否有所不同</span><br><span class="line">print(wine.groupby([&apos;type&apos;])[[&apos;quality&apos;]].agg([&apos;std&apos;]))</span><br><span class="line">tstat, pvalue, df = sm.stats.ttest_ind(red_wine, white_wine)</span><br><span class="line">print(&apos;tstat: %.3f pvalue: %.4f&apos; % (tstat, pvalue))</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>groupby()</code>函数使用<code>type</code>列中的两个值将数据分为两组。方括号可以生成一个列表，列表中的元素是用来生成输出的列。在这里我们只对质量列应用<code>describe()</code>函数。这些命令的结果就是生成一列统计量，来自红葡萄酒数据的计算结果和白葡萄酒数据的计算结果是相互垂直地堆叠在一起的。<code>unstack()</code>函数将结果重新排列，这样红葡萄酒和白葡萄酒的统计量就会显示在并排的两列中。<code>quantile()</code>函数对质量列计算第25百分位数和第75百分位数。<br>&emsp;&emsp;接下来，我们使用seaborn创建直方图，红条表示红葡萄酒，白条表示白葡萄酒。因为白葡萄酒数据比红葡萄酒多，所以直方图显示密度分布而不是频率分布。<br>&emsp;&emsp;最后，进行一下t检验，判断红葡萄酒和白葡萄酒的平均评分是否有区别。在这里我们想知道红葡萄酒和白葡萄酒评分的标准差是否相同，所以在t检验中可以使用合并方差。<br>&emsp;&emsp;下面是这段代码的运行结果。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">                type </span><br><span class="line">quality  count  red      1599.000000</span><br><span class="line">                white    4898.000000</span><br><span class="line">         mean   red         5.636023</span><br><span class="line">                white       5.877909</span><br><span class="line">         std    red         0.807569</span><br><span class="line">                white       0.885639</span><br><span class="line">         min    red         3.000000</span><br><span class="line">                white       3.000000</span><br><span class="line">         25%    red         5.000000</span><br><span class="line">                white       5.000000</span><br><span class="line">         50%    red         6.000000</span><br><span class="line">                white       6.000000</span><br><span class="line">         75%    red         6.000000</span><br><span class="line">                white       6.000000</span><br><span class="line">         max    red         8.000000</span><br><span class="line">                white       9.000000</span><br><span class="line">dtype: float64</span><br><span class="line">     quality      </span><br><span class="line">type     red white</span><br><span class="line">0.25     5.0   5.0</span><br><span class="line">0.75     6.0   6.0</span><br><span class="line">AxesSubplot(0.125,0.11;0.775x0.77)</span><br><span class="line">AxesSubplot(0.125,0.11;0.775x0.77)</span><br><span class="line">        quality</span><br><span class="line">            std</span><br><span class="line">type           </span><br><span class="line">red    0.807569</span><br><span class="line">white  0.885639</span><br><span class="line">tstat: -9.686 pvalue: 0.0000</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200227210016145.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;由绘制的密度分布直方图和输出结果可以得出结论：两种葡萄酒的评分都近似正态分布；t检验统计量为-9.686，p值为0.000，这说明白葡萄酒的平均质量评分在统计意义上大于红葡萄酒的平均质量评分。  </p>
<h2 id="成对变量之间的关系和相关性"><a href="#成对变量之间的关系和相关性" class="headerlink" title="成对变量之间的关系和相关性"></a>成对变量之间的关系和相关性</h2><p>&emsp;&emsp;前面已经检查了输出变量，下面简单研究一下输入变量。让我们计算一下输入变量两两之间的相关性，并为一些输入变量创建带有回归直线的散点图：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"># 计算所有变量的相关矩阵</span><br><span class="line">print(wine.corr())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 从红葡萄酒和白葡萄酒的数据中取出一个“小”样本来进行绘图</span><br><span class="line">def take_sample(data_frame, replace=False, n=200):</span><br><span class="line">    return data_frame.loc[np.random.choice(data_frame.index, replace=replace, size=n)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reds_sample = take_sample(wine.loc[wine[&apos;type&apos;] == &apos;red&apos;, :])</span><br><span class="line">whites_sample = take_sample(wine.loc[wine[&apos;type&apos;] == &apos;white&apos;, :])</span><br><span class="line">wine_sample = pd.concat([reds_sample, whites_sample])</span><br><span class="line">wine[&apos;in_sample&apos;] = np.where(wine.index.isin(wine_sample.index), 1., 0.)</span><br><span class="line">print(pd.crosstab(wine.in_sample, wine.type, margins=True))</span><br><span class="line"></span><br><span class="line"># 查看成对变量之间的关系</span><br><span class="line">sns.set_style(&quot;dark&quot;)</span><br><span class="line">g = sns.pairplot(wine_sample, kind=&apos;reg&apos;, plot_kws=&#123;&quot;ci&quot;: False, &quot;x_jitter&quot;: 0.25, &quot;y_jitter&quot;: 0.25&#125;, hue=&apos;type&apos;,</span><br><span class="line">                 diag_kind=&apos;hist&apos;, diag_kws=&#123;&quot;bins&quot;: 10, &quot;alpha&quot;: 1.0&#125;, palette=dict(red=&quot;red&quot;, white=&quot;white&quot;),</span><br><span class="line">                 markers=[&quot;o&quot;, &quot;s&quot;], vars=[&apos;quality&apos;, &apos;alcohol&apos;, &apos;residual_sugar&apos;])</span><br><span class="line">print(g)</span><br><span class="line">plt.suptitle(&apos;Histograms and Scatter Plots of Quality, Alcohol, and Residual Sugar&apos;, fontsize=14,</span><br><span class="line">             horizontalalignment=&apos;center&apos;, verticalalignment=&apos;top&apos;, x=0.5, y=0.999)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>corr()</code>函数可以计算出数据集中所有变量两两之间的线性相关性。<br>&emsp;&emsp;数据集中有6000多个点，所以如果将它们都画在统计图中，就很难分辨出清楚的点。我们定义了一个函数<code>take_sample()</code>，用来抽取在统计图中使用的样本点。这个函数使用pandas数据框索引和numpy的<code>random.choice()</code>函数随机选择一个行的子集。我们是用这个函数对红葡萄酒和白葡萄酒分别进行抽样，并将抽样所得的两个数据框连接成一个数据框。然后，在wine数据框中创建一个新列<code>in_sample</code>，并使用numpy的<code>where()</code>函数和pandas的<code>isin()</code>函数对这个新列进行填充，填充的值根据此行的索引值是否在抽样数据的索引值中分别设为1和0.最后，我们使用pandas的<code>crosstab()</code>函数来确认<code>in_sample</code>列中包含400个1（200条红葡萄酒数据和200条白葡萄酒数据）和6097个0。<br>&emsp;&emsp;seaborn的<code>pairplot()</code>函数可以创建一个统计图矩阵。主对角线上的图以直方图或密度图的形式显示了每个变量的单变量分布，对角线之外的图以散点图的形式显示了每两个变量之间的双变量分布，散点图中可以有回归直线，也可以没有。因为质量评分都是整数，所以加上一点振动可以更容易看出数据在何处集中。<br>&emsp;&emsp;这段代码的运行结果如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">                      fixed_acidity  volatile_acidity  ...   alcohol   quality</span><br><span class="line">fixed_acidity              1.000000          0.219008  ... -0.095452 -0.076743</span><br><span class="line">volatile_acidity           0.219008          1.000000  ... -0.037640 -0.265699</span><br><span class="line">citric_acid                0.324436         -0.377981  ... -0.010493  0.085532</span><br><span class="line">residual_sugar            -0.111981         -0.196011  ... -0.359415 -0.036980</span><br><span class="line">chlorides                  0.298195          0.377124  ... -0.256916 -0.200666</span><br><span class="line">free_sulfur_dioxide       -0.282735         -0.352557  ... -0.179838  0.055463</span><br><span class="line">total_sulfur_dioxide      -0.329054         -0.414476  ... -0.265740 -0.041385</span><br><span class="line">density                    0.458910          0.271296  ... -0.686745 -0.305858</span><br><span class="line">pH                        -0.252700          0.261454  ...  0.121248  0.019506</span><br><span class="line">sulphates                  0.299568          0.225984  ... -0.003029  0.038485</span><br><span class="line">alcohol                   -0.095452         -0.037640  ...  1.000000  0.444319</span><br><span class="line">quality                   -0.076743         -0.265699  ...  0.444319  1.000000</span><br><span class="line"></span><br><span class="line">[12 rows x 12 columns]</span><br><span class="line">type        red  white   All</span><br><span class="line">in_sample                   </span><br><span class="line">0.0        1399   4698  6097</span><br><span class="line">1.0         200    200   400</span><br><span class="line">All        1599   4898  6497</span><br><span class="line">&lt;seaborn.axisgrid.PairGrid object at 0x00000249B4D11E48&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200227221539322.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;根据相关系数的符号，从输出中可以知道酒精含量、硫酸盐、pH值、游离二氧化硫和柠檬酸这些指标与质量是正相关的，相反，非挥发性酸、挥发性酸、残余糖分、氯化物、总二氧化硫和密度这些指标与质量是负相关的。<br>&emsp;&emsp;从统计图中可以看出，对于红葡萄酒和白葡萄酒来说，酒精含量的均值和标准差是大致相同的，但是，白葡萄酒残余糖分的均值和标准差却大于红葡萄酒残余糖分的均值和标准差。从回归直线可以看出，对于两种类型的葡萄酒，酒精含量增加时，质量评分也随之提高，相反，残余糖分增加时，质量评分则随之降低。这两个变量对白葡萄酒的影响都要大于对红葡萄酒的影响。  </p>
<h2 id="使用最小二乘估计进行线性回归"><a href="#使用最小二乘估计进行线性回归" class="headerlink" title="使用最小二乘估计进行线性回归"></a>使用最小二乘估计进行线性回归</h2><p>&emsp;&emsp;相关系数和两两变量之间的统计图有助于对两个变量之间的关系进行量化和可视化，但是它们不能测量出每个自变量在其他自变量不变时与因变量之间的关系。线性回归可以解决这个问题。<br>&emsp;&emsp;线性回归模型如下：$$y_i\sim N(\mu_i,\sigma^2),$$$$\mu_i=\beta_0+\beta_1x_{i1}+\beta_2x_{i2}+…+\beta_px_{ip}$$对于$i=1,2,…，n$个观测和$p$个自变量。<br>&emsp;&emsp;这个模型表示观测$y_i$服从均值为$\mu_i$方差为$\sigma^2$的正态分布（高斯分布），其中$\mu_i$依赖于自变量，$\sigma^2$为一个常数。也就是说，给定了自变量的值之后，我们就可以得到一个具体的质量评分，但在另一天，给定同样的自变量值，我们可能会得到一个和前面不同的质量评分。但是，经过很多天自变量取同样的值（也就是一个很长的周期），质量评分会落在$\mu_i±\sigma$这个范围内。<br>&emsp;&emsp;下面我们使用statsmodel包来进行线性回归：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">my_formula = &apos;quality ~ alcohol + chlorides + citric_acid + density +fixed_acidity + free_sulfur_dioxide + pH&apos; \</span><br><span class="line">             &apos;+ residual_sugar + sulphates + total_sulfur_dioxide + volatile_acidity&apos;</span><br><span class="line"></span><br><span class="line">lm = ols(my_formula, data=wine).fit()</span><br><span class="line"></span><br><span class="line"># 或者，也可以使用广义线性模型（glm）语法进行线性回归</span><br><span class="line"># lm = glm(my_formula, data=wine, family=sm.families.Gaussian()).fit()</span><br><span class="line"></span><br><span class="line">print(lm.summary())</span><br><span class="line">print(&quot;\nQuantities you can extract from the result:\n%s&quot; % dir(lm))</span><br><span class="line">print(&quot;Coefficients:\n%s&quot; % lm.params)</span><br><span class="line">print(&quot;Coefficient Std Errors:\n%s&quot; % lm.bse)</span><br><span class="line">print(&quot;\nAdj. R-squared:\n%.2f&quot; % lm.rsquared_adj)</span><br><span class="line">print(&quot;\nF-statistic: %.1f   P-value: %.2f&quot; % (lm.fvalue, lm.f_pvalue))</span><br><span class="line">print(&quot;\nNumber of obs: %d   Number of fitted values: %d&quot; % (lm.nobs, len(lm.fittedvalues)))</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;运行结果如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">                            OLS Regression Results                            </span><br><span class="line">==============================================================================</span><br><span class="line">Dep. Variable:                quality   R-squared:                       0.292</span><br><span class="line">Model:                            OLS   Adj. R-squared:                  0.291</span><br><span class="line">Method:                 Least Squares   F-statistic:                     243.3</span><br><span class="line">Date:                Thu, 27 Feb 2020   Prob (F-statistic):               0.00</span><br><span class="line">Time:                        23:03:10   Log-Likelihood:                -7215.5</span><br><span class="line">No. Observations:                6497   AIC:                         1.445e+04</span><br><span class="line">Df Residuals:                    6485   BIC:                         1.454e+04</span><br><span class="line">Df Model:                          11                                         </span><br><span class="line">Covariance Type:            nonrobust                                         </span><br><span class="line">========================================================================================</span><br><span class="line">                           coef    std err          t      P&gt;|t|      [0.025      0.975]</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">Intercept               55.7627     11.894      4.688      0.000      32.447      79.079</span><br><span class="line">alcohol                  0.2670      0.017     15.963      0.000       0.234       0.300</span><br><span class="line">chlorides               -0.4837      0.333     -1.454      0.146      -1.136       0.168</span><br><span class="line">citric_acid             -0.1097      0.080     -1.377      0.168      -0.266       0.046</span><br><span class="line">density                -54.9669     12.137     -4.529      0.000     -78.760     -31.173</span><br><span class="line">fixed_acidity            0.0677      0.016      4.346      0.000       0.037       0.098</span><br><span class="line">free_sulfur_dioxide      0.0060      0.001      7.948      0.000       0.004       0.007</span><br><span class="line">pH                       0.4393      0.090      4.861      0.000       0.262       0.616</span><br><span class="line">residual_sugar           0.0436      0.005      8.449      0.000       0.033       0.054</span><br><span class="line">sulphates                0.7683      0.076     10.092      0.000       0.619       0.917</span><br><span class="line">total_sulfur_dioxide    -0.0025      0.000     -8.969      0.000      -0.003      -0.002</span><br><span class="line">volatile_acidity        -1.3279      0.077    -17.162      0.000      -1.480      -1.176</span><br><span class="line">==============================================================================</span><br><span class="line">Omnibus:                      144.075   Durbin-Watson:                   1.646</span><br><span class="line">Prob(Omnibus):                  0.000   Jarque-Bera (JB):              324.712</span><br><span class="line">Skew:                          -0.006   Prob(JB):                     3.09e-71</span><br><span class="line">Kurtosis:                       4.095   Cond. No.                     2.49e+05</span><br><span class="line">==============================================================================</span><br><span class="line"></span><br><span class="line">Warnings:</span><br><span class="line">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</span><br><span class="line">[2] The condition number is large, 2.49e+05. This might indicate that there are</span><br><span class="line">strong multicollinearity or other numerical problems.</span><br><span class="line"></span><br><span class="line">Quantities you can extract from the result:</span><br><span class="line">[&apos;HC0_se&apos;, &apos;HC1_se&apos;, &apos;HC2_se&apos;, &apos;HC3_se&apos;, &apos;_HCCM&apos;, &apos;__class__&apos;, &apos;__delattr__&apos;, &apos;__dict__&apos;, &apos;__dir__&apos;, &apos;__doc__&apos;, &apos;__eq__&apos;, &apos;__format__&apos;, &apos;__ge__&apos;, &apos;__getattribute__&apos;, &apos;__gt__&apos;, &apos;__hash__&apos;, &apos;__init__&apos;, &apos;__init_subclass__&apos;, &apos;__le__&apos;, &apos;__lt__&apos;, &apos;__module__&apos;, &apos;__ne__&apos;, &apos;__new__&apos;, &apos;__reduce__&apos;, &apos;__reduce_ex__&apos;, &apos;__repr__&apos;, &apos;__setattr__&apos;, &apos;__sizeof__&apos;, &apos;__str__&apos;, &apos;__subclasshook__&apos;, &apos;__weakref__&apos;, &apos;_cache&apos;, &apos;_data_attr&apos;, &apos;_get_robustcov_results&apos;, &apos;_is_nested&apos;, &apos;_wexog_singular_values&apos;, &apos;aic&apos;, &apos;bic&apos;, &apos;bse&apos;, &apos;centered_tss&apos;, &apos;compare_f_test&apos;, &apos;compare_lm_test&apos;, &apos;compare_lr_test&apos;, &apos;condition_number&apos;, &apos;conf_int&apos;, &apos;conf_int_el&apos;, &apos;cov_HC0&apos;, &apos;cov_HC1&apos;, &apos;cov_HC2&apos;, &apos;cov_HC3&apos;, &apos;cov_kwds&apos;, &apos;cov_params&apos;, &apos;cov_type&apos;, &apos;df_model&apos;, &apos;df_resid&apos;, &apos;diagn&apos;, &apos;eigenvals&apos;, &apos;el_test&apos;, &apos;ess&apos;, &apos;f_pvalue&apos;, &apos;f_test&apos;, &apos;fittedvalues&apos;, &apos;fvalue&apos;, &apos;get_influence&apos;, &apos;get_prediction&apos;, &apos;get_robustcov_results&apos;, &apos;initialize&apos;, &apos;k_constant&apos;, &apos;llf&apos;, &apos;load&apos;, &apos;model&apos;, &apos;mse_model&apos;, &apos;mse_resid&apos;, &apos;mse_total&apos;, &apos;nobs&apos;, &apos;normalized_cov_params&apos;, &apos;outlier_test&apos;, &apos;params&apos;, &apos;predict&apos;, &apos;pvalues&apos;, &apos;remove_data&apos;, &apos;resid&apos;, &apos;resid_pearson&apos;, &apos;rsquared&apos;, &apos;rsquared_adj&apos;, &apos;save&apos;, &apos;scale&apos;, &apos;ssr&apos;, &apos;summary&apos;, &apos;summary2&apos;, &apos;t_test&apos;, &apos;t_test_pairwise&apos;, &apos;tvalues&apos;, &apos;uncentered_tss&apos;, &apos;use_t&apos;, &apos;wald_test&apos;, &apos;wald_test_terms&apos;, &apos;wresid&apos;]</span><br><span class="line">Coefficients:</span><br><span class="line">Intercept               55.762750</span><br><span class="line">alcohol                  0.267030</span><br><span class="line">chlorides               -0.483714</span><br><span class="line">citric_acid             -0.109657</span><br><span class="line">density                -54.966942</span><br><span class="line">fixed_acidity            0.067684</span><br><span class="line">free_sulfur_dioxide      0.005970</span><br><span class="line">pH                       0.439296</span><br><span class="line">residual_sugar           0.043559</span><br><span class="line">sulphates                0.768252</span><br><span class="line">total_sulfur_dioxide    -0.002481</span><br><span class="line">volatile_acidity        -1.327892</span><br><span class="line">dtype: float64</span><br><span class="line">Coefficient Std Errors:</span><br><span class="line">Intercept               11.893899</span><br><span class="line">alcohol                  0.016728</span><br><span class="line">chlorides                0.332683</span><br><span class="line">citric_acid              0.079619</span><br><span class="line">density                 12.137473</span><br><span class="line">fixed_acidity            0.015573</span><br><span class="line">free_sulfur_dioxide      0.000751</span><br><span class="line">pH                       0.090371</span><br><span class="line">residual_sugar           0.005156</span><br><span class="line">sulphates                0.076123</span><br><span class="line">total_sulfur_dioxide     0.000277</span><br><span class="line">volatile_acidity         0.077373</span><br><span class="line">dtype: float64</span><br><span class="line"></span><br><span class="line">Adj. R-squared:</span><br><span class="line">0.29</span><br><span class="line"></span><br><span class="line">F-statistic: 243.3   P-value: 0.00</span><br><span class="line"></span><br><span class="line">Number of obs: 6497   Number of fitted values: 6497</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;字符串变量<code>my_formula</code>包含的是类似R语言语法的回归公式定义。波浪线左侧的变量<code>quality</code>是因变量，波浪线右侧的变量是自变量。<br>&emsp;&emsp;下一行代码使用公式和数据你喝一个普通最小二乘回归模型，并将结果赋给变量<code>lm</code>。被注释掉的那一行代码使用广义线性模型（glm）的语法代替普通最小二乘语法也可以拟合同样的模型。  </p>
<blockquote>
<p>Tips:<br>dir()：不带参数时，返回当前范围内的变量、方法和定义的类型列表；带参数时，返回参数的属性、方法列表<br>lm.params：以一个序列的形式返回模型系数<br>lm.rsquared_adj：返回修正R方<br>lm.fvalue：返回F统计量<br>lm.f_pvalue：返回F统计量的p值<br>lm.fittedvalues：返回拟合值</p>
</blockquote>
<h2 id="系数解释"><a href="#系数解释" class="headerlink" title="系数解释"></a>系数解释</h2><p>&emsp;&emsp;在这个模型中，某个自变量系数的意义是，在其他自变量保持不变的情况下，这个自变量发生1个单位的变化时，导致葡萄酒质量评分发生的平均变化。<br>&emsp;&emsp;并不是所有的系数都需要解释。例如，截距系数的意义是当所有自变量的值都为0时的期望评分。因为没有任何一种葡萄酒的各种成分都为0，所以截距系数没有具体意义。  </p>
<h2 id="自变量标准化"><a href="#自变量标准化" class="headerlink" title="自变量标准化"></a>自变量标准化</h2><p>&emsp;&emsp;关于这个模型，普通最小二乘回归是通过使残差平方和最小化来估计未知的$\beta$参数值的，这里的残差是指自变量观测值与拟合值之间的差别。因为残差大小是依赖于自变量的测量单位的，所以如果自变量的测量单位相差很大的话，那么将自变量标准化后，就可以更容易对模型进行解释了。对自变量进行标准化的方法是，先从自变量的每个观测值中减去均值，然后再除以这个自变量的标准差。自变量标准化完成以后，它的均值为0，标准差为1。  </p>
<blockquote>
<p>在 <em>Data Analysis Using Regression and Multilevel/Hierarchical Models</em> (Cambridge University Press, 2007, p.56) 中，Gelman and Hill建议在数据集中既有连续型自变量又有二值型自变量的情况下，用两杯标准差去除，而不是用一倍标准差。这样的话，标准化自变量一个单位的变化就对应于均值上下一个标准差的变化。  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"># 创建一个名为dependent_variable的序列来保存质量数据</span><br><span class="line">dependent_variable = wine[&apos;quality&apos;]</span><br><span class="line"></span><br><span class="line"># 创建一个名为independent_variables的数据框来保存初始的葡萄酒数据集中除quality、type和in_sample之外的所有变量</span><br><span class="line">independent_variables = wine[wine.columns.difference([&apos;quality&apos;, &apos;type&apos;, &apos;in_sample&apos;])]</span><br><span class="line"></span><br><span class="line"># 对自变量进行标准化</span><br><span class="line"># 对每个变量，在每个观测中减去变量的均值</span><br><span class="line"># 并且使用结果除以变量的标准差</span><br><span class="line">independent_variables_standardized = (independent_variables</span><br><span class="line">                                      - independent_variables.mean()) / independent_variables.std()</span><br><span class="line"></span><br><span class="line"># 将因变量quality作为一列添加到自变量数据框中</span><br><span class="line"># 创建一个带有标准化自变量的新数据集</span><br><span class="line">wine_standardized = pd.concat([dependent_variable, independent_variables_standardized], axis=1)</span><br><span class="line"></span><br><span class="line"># 重新进行线性回归，并查看一下摘要统计</span><br><span class="line">lm_standardized = ols(my_formula, data=wine_standardized).fit()</span><br><span class="line">print(lm_standardized.summary())</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;运行结果如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">                            OLS Regression Results                            </span><br><span class="line">==============================================================================</span><br><span class="line">Dep. Variable:                quality   R-squared:                       0.292</span><br><span class="line">Model:                            OLS   Adj. R-squared:                  0.291</span><br><span class="line">Method:                 Least Squares   F-statistic:                     243.3</span><br><span class="line">Date:                Fri, 28 Feb 2020   Prob (F-statistic):               0.00</span><br><span class="line">Time:                        16:31:15   Log-Likelihood:                -7215.5</span><br><span class="line">No. Observations:                6497   AIC:                         1.445e+04</span><br><span class="line">Df Residuals:                    6485   BIC:                         1.454e+04</span><br><span class="line">Df Model:                          11                                         </span><br><span class="line">Covariance Type:            nonrobust                                         </span><br><span class="line">========================================================================================</span><br><span class="line">                           coef    std err          t      P&gt;|t|      [0.025      0.975]</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">Intercept                5.8184      0.009    637.785      0.000       5.800       5.836</span><br><span class="line">alcohol                  0.3185      0.020     15.963      0.000       0.279       0.358</span><br><span class="line">chlorides               -0.0169      0.012     -1.454      0.146      -0.040       0.006</span><br><span class="line">citric_acid             -0.0159      0.012     -1.377      0.168      -0.039       0.007</span><br><span class="line">density                 -0.1648      0.036     -4.529      0.000      -0.236      -0.093</span><br><span class="line">fixed_acidity            0.0877      0.020      4.346      0.000       0.048       0.127</span><br><span class="line">free_sulfur_dioxide      0.1060      0.013      7.948      0.000       0.080       0.132</span><br><span class="line">pH                       0.0706      0.015      4.861      0.000       0.042       0.099</span><br><span class="line">residual_sugar           0.2072      0.025      8.449      0.000       0.159       0.255</span><br><span class="line">sulphates                0.1143      0.011     10.092      0.000       0.092       0.137</span><br><span class="line">total_sulfur_dioxide    -0.1402      0.016     -8.969      0.000      -0.171      -0.110</span><br><span class="line">volatile_acidity        -0.2186      0.013    -17.162      0.000      -0.244      -0.194</span><br><span class="line">==============================================================================</span><br><span class="line">Omnibus:                      144.075   Durbin-Watson:                   1.646</span><br><span class="line">Prob(Omnibus):                  0.000   Jarque-Bera (JB):              324.712</span><br><span class="line">Skew:                          -0.006   Prob(JB):                     3.09e-71</span><br><span class="line">Kurtosis:                       4.095   Cond. No.                         9.61</span><br><span class="line">==============================================================================</span><br><span class="line"></span><br><span class="line">Warnings:</span><br><span class="line">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;自变量标准化会改变对模型系数的解释。现在每个自变量系数的含义是，不同的葡萄酒在其他自变量均相同的情况下，某个自变量相差1个标准差，会使葡萄酒的质量评分平均相差多少个标准差。<br>&emsp;&emsp;自变量标准化同样会改变对截距的解释。当解释变量被标准化后，截距表示的就是当所有自变量取值为均值时因变量的均值。  </p>
<h2 id="预测"><a href="#预测" class="headerlink" title="预测"></a>预测</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"># 使用葡萄酒数据集中的前10个观测创建10个“新”观测</span><br><span class="line"># 新观测中只包含模型中使用的自变量</span><br><span class="line">new_observations = wine.loc[wine.index.isin(range(10)), independent_variables.columns]</span><br><span class="line"></span><br><span class="line"># 基于新观测中的葡萄酒特性预测质量评分</span><br><span class="line">y_predicted = lm.predict(new_observations)</span><br><span class="line"></span><br><span class="line"># 将预测值保留两位小数并打印到屏幕上</span><br><span class="line">y_predicted_rounded = [round(score, 2) for score in y_predicted]</span><br><span class="line">print(y_predicted_rounded)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;运行结果如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[5.0, 4.92, 5.03, 5.68, 5.0, 5.04, 5.02, 5.3, 5.24, 5.69]</span><br></pre></td></tr></table></figure>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2020/02/20/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%9B%BE%E4%B8%8E%E5%9B%BE%E8%A1%A8%EF%BC%88ggplot%E7%95%AA%E5%A4%96%E7%AF%87%EF%BC%89/">
                Python数据分析基础之图与图表（ggplot番外篇）
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2020-02-20</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="ggplot简介"><a href="#ggplot简介" class="headerlink" title="ggplot简介"></a>ggplot简介</h2><p>&emsp;&emsp;ggplot是一个Python绘图包，它基于R语言的ggplot2包和图形语法。ggplot与其他绘图包的关键区别是它的语法将数据与实际绘图明确地分离开来。为了对数据进行可视化表示，ggplot提供了几种基本元素：几何对象、图形属性和标度。除此之外，为了进行更高级的绘图，ggplot还提供一些附加元素：统计变换、坐标系、子窗口和可视化主题。<br>&emsp;&emsp;Python的ggplot库不像R语言的ggplot2库那样成熟，所以它不具备ggplot2的所有功能。也就是说，它没有那么多的几何对象、统计变换和标度，也没有坐标系、注释和增强功能。在与ggplot相关的包进行了升级与修改之后，使用ggplot也可能会遇到问题。  </p>
<h2 id="安装ggplot模块"><a href="#安装ggplot模块" class="headerlink" title="安装ggplot模块"></a>安装ggplot模块</h2><p>&emsp;&emsp;打开Anaconda Prompt（如果你没有安装Anaconda的话，打开命令行窗口即可），输入命令<code>pip install ggplot</code>，等待安装完成。  </p>
<h2 id="参考书的示例代码及问题"><a href="#参考书的示例代码及问题" class="headerlink" title="参考书的示例代码及问题"></a>参考书的示例代码及问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">from ggplot import *</span><br><span class="line"></span><br><span class="line">print(mtcars.head())</span><br><span class="line">plt1 = ggplot(aes(x=&apos;mpg&apos;), data=mtcars) +\</span><br><span class="line"> 		geom_histogram(fill=&apos;darkblue&apos;, binwidth=2) +\</span><br><span class="line">		xlim(10, 35) + ylim(0, 10) +\</span><br><span class="line">		xlab(&quot;MPG&quot;) + ylab(&quot;Frequency&quot;) +\</span><br><span class="line">		ggtitle(&quot;Histogram of MPG&quot;) +\</span><br><span class="line">		theme_matplotlib()</span><br><span class="line">print(plt1)</span><br><span class="line"></span><br><span class="line">print(meat.head())</span><br><span class="line">plt2 = ggplot(aes(x=&apos;date&apos;, y=&apos;beef&apos;), data=meat) +\</span><br><span class="line">		geom_line(color=&apos;purple&apos;, size=1.5, alpha=0.75) +\</span><br><span class="line">		stat_smooth(colour=&apos;blue&apos;, size=2.0, span=0.15) +\</span><br><span class="line">		xlab(&quot;Year&quot;) + ylab(&quot;Head of Cattle Slaughtered&quot;) +\</span><br><span class="line">		ggtitle(&quot;Beef Consumption Over Time&quot;) +\</span><br><span class="line">		theme_seaborn()</span><br><span class="line">print(plt2)</span><br><span class="line"></span><br><span class="line">print(diamonds.head())</span><br><span class="line">plt3 = ggplot(diamonds, aes(x=&apos;carat&apos;, y=&apos;price&apos;, colour=&apos;cut&apos;)) +\</span><br><span class="line">		geom_point(alpha=0.5) +\</span><br><span class="line">		scale_color_gradient(low=&apos;#05D9F6&apos;, high=&apos;#5011D1&apos;) +\</span><br><span class="line">		xlim(0, 6) + ylim(0, 20000) +\</span><br><span class="line">		xlab(&quot;Carat&quot;) + ylab(&quot;Price&quot;) +\</span><br><span class="line">		ggtitle(&quot;Diamond Price by Carat and Cut&quot;) +\</span><br><span class="line">		theme_gray()</span><br><span class="line">print(plt3)</span><br><span class="line"></span><br><span class="line">ggsave(plt3, &quot;ggplot_plots.png&quot;)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;我在运行这个脚本的时候，PyCharm报错信息为：<code>AttributeError: module &#39;pandas&#39; has no attribute &#39;tslib&#39;</code>。我当时就懵了：这是什么情况？？？<br>&emsp;&emsp;后来我在网上查找了一下相关资料，以下是对这个问题的解答。  </p>
<blockquote>
<p>抱歉，看起来ggplot（又称ggpy）是一个官方不再维护的项目了，github上的最近一次提交还是三年前。而<code>AttributeError: module &#39;pandas&#39; has no attribute &#39;tslib&#39;</code>也是已知的由于 pandas 版本更新，API改变带来的bug。  </p>
</blockquote>
<p>&emsp;&emsp;解答者还在回答中提供了ggplot模块在GitHub上的issue和PR，但是我英语水平一般，就没有仔细地阅读这些，而是打算自己动手解决。  </p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>&emsp;&emsp;我们找到smoothers.py和utils.py这两个文件，如下图所示修改红框中的内容。  </p>
<blockquote>
<p>Tips:<br>smoothers.py的路径：D:\Anaconda3\Lib\site-packages\ggplot\stats\smoothers.py<br>utils.py的路径：D:\Anaconda3\Lib\site-packages\ggplot\utils.py<br>由于Anaconda3文件夹保存位置不同，路径可能会有差异。  </p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200220144626646.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">)<img src="https://img-blog.csdnimg.cn/20200220144707867.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;修改完成之后，我们再次运行上面的代码。<br>&emsp;&emsp;运行结果显示报错信息：<code>NameError: name &#39;theme_matplotlib&#39; is not defined</code>。此时我的内心是崩溃的：我的天，怎么还是有问题啊！！！<br>&emsp;&emsp;好在我很快地冷静了下来，开始着手分析这个问题。<br>&emsp;&emsp;我打开了ggplot.py文件，按下Ctrl+F组合键，输入“theme”进行搜索，得到如下图所示的搜索信息。  </p>
<blockquote>
<p>Tips:<br>ggplot.py的路径：D:\Anaconda3\Lib\site-packages\ggplot\ggplot.py<br>由于Anaconda3文件夹保存位置不同，路径可能会有差异。  </p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2020022014594812.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;接下来，我打开了ggplot文件夹中的themes文件夹，发现……emmmm……它好像根本就没有<code>theme_matplotlib</code>和<code>theme_seaborn</code>啊！！！<br><img src="https://img-blog.csdnimg.cn/20200220150320281.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;我的内心再一次崩溃。<br>&emsp;&emsp;算了，没有就没有吧，大不了我不用就是了。<br>&emsp;&emsp;于是，经过了一番折腾，代码变成了下面这个样子：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">from ggplot import *</span><br><span class="line"></span><br><span class="line">print(diamonds.head())</span><br><span class="line">plt = ggplot(diamonds, aes(x=&apos;carat&apos;, y=&apos;price&apos;, colour=&apos;cut&apos;)) + \</span><br><span class="line">      geom_point(alpha=0.5) + \</span><br><span class="line">      scale_color_gradient(low=&apos;#05D9F6&apos;, high=&apos;#5011D1&apos;) + \</span><br><span class="line">      xlim(0, 6) + ylim(0, 20000) + \</span><br><span class="line">      xlab(&quot;Carat&quot;) + ylab(&quot;Price&quot;) + \</span><br><span class="line">      ggtitle(&quot;Diamond Price by Carat and Cut&quot;) + \</span><br><span class="line">      theme_gray()</span><br><span class="line">print(plt)</span><br><span class="line"></span><br><span class="line">ggsave(plt, &quot;ggplot_plots.png&quot;)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;再运行一次。你们猜怎么样？<br>&emsp;&emsp;又报错了。<br><img src="https://img-blog.csdnimg.cn/20200220150906918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;好在之前已经折腾了那么多，再报错我也见怪不怪了。我再次打开ggplot.py文件，以“save”为关键字搜索一下。<br><img src="https://img-blog.csdnimg.cn/20200220151233433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;原来它不叫<code>ggsave</code>而是叫<code>save</code>啊。这样一来就好办多了，我们再修改一下代码：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"></span><br><span class="line">from ggplot import *</span><br><span class="line"></span><br><span class="line">print(diamonds.head())</span><br><span class="line">plt = ggplot(diamonds, aes(x=&apos;carat&apos;, y=&apos;price&apos;, colour=&apos;cut&apos;)) + \</span><br><span class="line">      geom_point(alpha=0.5) + \</span><br><span class="line">      scale_color_gradient(low=&apos;#05D9F6&apos;, high=&apos;#5011D1&apos;) + \</span><br><span class="line">      xlim(0, 6) + ylim(0, 20000) + \</span><br><span class="line">      xlab(&quot;Carat&quot;) + ylab(&quot;Price&quot;) + \</span><br><span class="line">      ggtitle(&quot;Diamond Price by Carat and Cut&quot;) + \</span><br><span class="line">      theme_gray()</span><br><span class="line">print(plt)</span><br><span class="line"></span><br><span class="line">ggplot.save(plt, &quot;ggplot_plots.png&quot;, dpi=400)</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这次，它终于没有报错！没有报错！没有报错！！！<br><img src="https://img-blog.csdnimg.cn/2020022015155596.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NTU0MDEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;不过它保存出来的这个png格式文件……红框里面的内容不太一样，图上的点的颜色也有些许不同……这我就不是很清楚了。  </p>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>&emsp;&emsp;我觉得，正是由于Python的ggplot模块没有R语言的ggplot2模块那么成熟，再加上官方已经有三年多的时间没有对其进行维护和升级了，这期间它所依赖的模块有所更新（比如pandas），才会导致这一系列问题。所以，如果想使用Python进行统计图表的绘制，相较于ggplot模块，matplotlib和seaborn会更加友好一些。  </p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="disabled" href="/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    I'd walk a million miles just to see your smile. 
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2020/05/10/%E5%9F%BA%E4%BA%8EFluent-Terminal%E5%92%8CCmder%E6%89%93%E9%80%A0%E4%B8%80%E4%B8%AA%E7%BE%8E%E8%A7%82%E7%9A%84Windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/">基于Fluent Terminal和Cmder打造</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2020/04/24/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E3%80%91%E8%BF%9115%E5%B9%B4%E7%9A%84%E4%B8%AD%E5%9B%BD%E5%9B%BD%E5%86%85%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC/">【Python网络爬虫与数据可视化实战案例】近15</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2020/04/17/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E3%80%91%E6%9C%AA%E6%9D%A515%E5%A4%A9%E6%B0%94%E6%B8%A9%E8%B5%B0%E5%8A%BF%E5%9B%BE/">【Python网络爬虫与数据可视化实战案例】未来1</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2020/03/25/%E3%80%90Python%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0%E3%80%91%E4%BF%A1%E6%81%AF%E6%A0%87%E8%AE%B0%E4%B8%8E%E6%8F%90%E5%8F%96%E6%96%B9%E6%B3%95/">【Python网络爬虫笔记】信息标记与提取方法</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/CCH21" target="_blank" rel="noopener">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:1398635912@qq.com" target="_blank" rel="noopener">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/" target="_blank" rel="noopener">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>